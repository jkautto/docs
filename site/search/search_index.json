{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"DAI/PAI Documentation","text":"<p>Welcome to the comprehensive documentation for the DAI/PAI ecosystem - an AI-powered infrastructure and personal assistant system.</p>"},{"location":"#what-is-daipai","title":"What is DAI/PAI?","text":"<p>DAI (Development AI Infrastructure) and PAI (Personal AI Assistant) form an integrated ecosystem that manages infrastructure, automates tasks, and provides intelligent assistance.</p> <p>Quick Overview</p> <ul> <li>DAI: Builds and maintains technical systems, manages infrastructure</li> <li>PAI: Personal assistant handling daily tasks, monitoring, and interactions</li> <li>Integrated: Both systems work together seamlessly</li> <li>AI-Powered: Built for and by AI agents</li> </ul> <p>New AI Agent?</p> <p>Start with the Quick Start Guide for essential information about navigating and working with the DAI/PAI system.</p>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li> <p> Getting Started</p> <p>New to DAI/PAI? Start here for a quick introduction and setup guide.</p> <p> Getting Started Guide</p> </li> <li> <p> API Reference</p> <p>Complete API documentation for all services including Tools, Task, and PAI Web APIs.</p> <p> API Documentation</p> </li> <li> <p> Operations Manual</p> <p>Daily maintenance procedures, monitoring setup, and troubleshooting guides.</p> <p> Operations Guide</p> </li> <li> <p>:material-architecture:{ .lg .middle } System Architecture</p> <p>Deep dive into the technical architecture, infrastructure, and design decisions.</p> <p> Architecture Overview</p> </li> </ul>"},{"location":"#system-components","title":"System Components","text":""},{"location":"#core-infrastructure","title":"Core Infrastructure","text":"<ul> <li>Web Server: nginx-based routing and SSL termination</li> <li>Applications: Multiple services (auth, pastebin, browser-test, etc.)</li> <li>Documentation: This MkDocs site at docs.kaut.to</li> <li>Monitoring: Integrated logging and alerting</li> </ul>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li> Secure: Multi-layer authentication and encryption</li> <li> Fast: Optimized for performance</li> <li> Modular: Microservices architecture</li> <li> AI-Native: Built for AI agent interaction</li> </ul>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"Section Description Architecture System design, infrastructure layout, technical decisions Guides Step-by-step tutorials and how-to guides Operations Maintenance procedures and troubleshooting API Reference Complete API documentation Applications Individual app documentation Context Library System state and context information Specifications Technical specifications and RFCs"},{"location":"#recent-updates","title":"Recent Updates","text":"<p>Documentation Migration</p> <p>This documentation has been migrated from multiple sources into a unified MkDocs site.  If you find any broken links or missing content, please report them.</p>"},{"location":"#whats-new","title":"What's New","text":"<ul> <li>\ud83d\udcda Unified Documentation: All docs now in one searchable location</li> <li>\ud83d\udd0d Enhanced Search: Full-text search across all documentation</li> <li>\ud83c\udf19 Dark Mode: Toggle between light and dark themes</li> <li>\ud83d\udcf1 Mobile Responsive: Optimized for all devices</li> <li>\ud83e\udd16 AI-Friendly: Structured for programmatic access</li> </ul>"},{"location":"#getting-help","title":"Getting Help","text":"<ul> <li>Search: Use the search bar to find specific topics</li> <li>Navigation: Use the sidebar for browsing by category</li> <li>Edit: Click the edit button to suggest improvements</li> <li>Context: Check the Context Library for current system state</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>This documentation is maintained by both human developers and AI agents. To contribute:</p> <ol> <li>Click the edit button on any page</li> <li>Make your changes</li> <li>Submit a pull request</li> <li>AI agents will review and merge approved changes</li> </ol> <p>AI Agent Notice</p> <p>This documentation system is designed to be read and updated by AI agents.  All content follows structured formats for optimal machine readability.</p>"},{"location":"quickstart/","title":"Quick Start for AI Agents","text":"<p>Welcome to the DAI/PAI ecosystem! This guide helps AI agents quickly understand and navigate the system.</p>"},{"location":"quickstart/#first-steps","title":"\ud83d\ude80 First Steps","text":""},{"location":"quickstart/#1-read-core-configuration","title":"1. Read Core Configuration","text":"<pre><code>cat /srv/CAG/core.json          # System paths, services, auth\ncat /srv/CLAUDE.md              # DAI agent instructions\ncat /srv/pai/CLAUDE.md          # PAI agent instructions\n</code></pre>"},{"location":"quickstart/#2-understand-your-role","title":"2. Understand Your Role","text":"<ul> <li>DAI: Development AI Infrastructure - builds and maintains systems</li> <li>PAI: Personal AI Assistant - handles daily tasks and monitoring</li> <li>You: Check your instructions to understand your specific role</li> </ul>"},{"location":"quickstart/#3-access-documentation","title":"3. Access Documentation","text":"<ul> <li>Web: https://docs.kaut.to (auth: kaut:to)</li> <li>Local: <code>/srv/apps/docs/docs/</code></li> <li>Search: <code>grep -r \"topic\" /srv/apps/docs/docs/</code></li> </ul>"},{"location":"quickstart/#essential-paths","title":"\ud83d\udcc1 Essential Paths","text":"<pre><code>/srv/                   # DAI infrastructure root\n/srv/pai/               # PAI system directory\n/srv/apps/              # Web applications\n/srv/jtools/            # CLI tools\n/srv/.env               # Environment variables\n/var/www/.env           # Additional env vars\n/srv/apps/docs/docs/    # Documentation source\n</code></pre>"},{"location":"quickstart/#authentication","title":"\ud83d\udd11 Authentication","text":""},{"location":"quickstart/#basic-auth-credentials","title":"Basic Auth Credentials","text":"<ul> <li>Admin: joni:Penacova (full access)</li> <li>Public: kaut:to (limited access)</li> </ul>"},{"location":"quickstart/#service-accounts","title":"Service Accounts","text":"<ul> <li>Google: <code>/srv/config/pai-service-account.json</code></li> <li>GitHub Token: In <code>/var/www/.env</code></li> <li>Slack Token: In <code>/srv/tokens/</code></li> </ul>"},{"location":"quickstart/#common-commands","title":"\ud83d\udee0\ufe0f Common Commands","text":""},{"location":"quickstart/#check-system-health","title":"Check System Health","text":"<pre><code># Service status\nsudo systemctl status pai-web kaut-api kaut-pastebin\n\n# View logs\nsudo journalctl -u pai-web -f\n\n# Check disk space\ndf -h /srv\n</code></pre>"},{"location":"quickstart/#update-documentation","title":"Update Documentation","text":"<pre><code># Edit documentation\nnano /srv/apps/docs/docs/[section]/[page].md\n\n# Rebuild site\ncd /srv/apps/docs\nsource venv/bin/activate\nmkdocs build\n</code></pre>"},{"location":"quickstart/#git-operations","title":"Git Operations","text":"<pre><code># Always commit with descriptive messages\ngit add .\ngit commit -m \"feat: add new feature\n\n- Detail what changed\n- Why it changed\"\ngit push\n</code></pre>"},{"location":"quickstart/#key-documentation","title":"\ud83d\udcda Key Documentation","text":""},{"location":"quickstart/#start-here","title":"Start Here","text":"<ol> <li>CAG Index - Knowledge base navigation</li> <li>Architecture Overview - System design</li> <li>Daily Maintenance - Routine tasks</li> </ol>"},{"location":"quickstart/#for-development","title":"For Development","text":"<ul> <li>API Documentation - Service APIs</li> <li>Specifications - Technical specs</li> <li>Implementation Guide - How to build</li> </ul>"},{"location":"quickstart/#for-operations","title":"For Operations","text":"<ul> <li>Troubleshooting - Common issues</li> <li>Emergency Procedures - Crisis response</li> <li>Monitoring - System health</li> </ul>"},{"location":"quickstart/#system-architecture","title":"\ud83c\udfd7\ufe0f System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           User Interface                 \u2502\n\u2502  (https://kaut.to, pb.kaut.to, etc)     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            Services                      \u2502\n\u2502  - PAI Web (8080)                       \u2502\n\u2502  - Task API (8001)                      \u2502\n\u2502  - Tools API (8002)                     \u2502\n\u2502  - Pastebin (8090)                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Infrastructure                   \u2502\n\u2502  - nginx (reverse proxy)                \u2502\n\u2502  - systemd (service management)         \u2502\n\u2502  - Git (version control)                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"quickstart/#development-workflow","title":"\ud83d\udd04 Development Workflow","text":"<ol> <li>Plan - Check specs in <code>/specs/</code></li> <li>Develop - Follow conventions in codebase</li> <li>Test - Verify functionality</li> <li>Document - Update relevant docs</li> <li>Commit - Use conventional commits</li> <li>Deploy - Follow deployment guides</li> </ol>"},{"location":"quickstart/#quick-actions","title":"\u26a1 Quick Actions","text":""},{"location":"quickstart/#need-to-find-something","title":"Need to find something?","text":"<pre><code># Search code\ngrep -r \"search_term\" /srv --include=\"*.py\"\n\n# Search docs\ngrep -r \"search_term\" /srv/apps/docs/docs\n\n# Find files\nfind /srv -name \"*pattern*\" -type f\n</code></pre>"},{"location":"quickstart/#need-to-fix-something","title":"Need to fix something?","text":"<ol> <li>Check Troubleshooting</li> <li>Look at recent commits: <code>git log --oneline -10</code></li> <li>Check service logs: <code>journalctl -u [service] -f</code></li> </ol>"},{"location":"quickstart/#need-to-add-something","title":"Need to add something?","text":"<ol> <li>Check existing patterns in codebase</li> <li>Follow the style guide</li> <li>Update documentation</li> <li>Test thoroughly</li> </ol>"},{"location":"quickstart/#best-practices","title":"\ud83c\udfaf Best Practices","text":""},{"location":"quickstart/#always","title":"Always","text":"<ul> <li>\u2705 Read existing code before writing new code</li> <li>\u2705 Follow established patterns</li> <li>\u2705 Document as you go</li> <li>\u2705 Commit frequently with clear messages</li> <li>\u2705 Test before deploying</li> </ul>"},{"location":"quickstart/#never","title":"Never","text":"<ul> <li>\u274c Hardcode credentials (use .env files)</li> <li>\u274c Skip documentation updates</li> <li>\u274c Make breaking changes without planning</li> <li>\u274c Ignore error messages</li> <li>\u274c Work without understanding context</li> </ul>"},{"location":"quickstart/#getting-help","title":"\ud83c\udd98 Getting Help","text":"<ol> <li>Check Documentation: Start with search</li> <li>Review Logs: Often contain the answer</li> <li>Check Recent Changes: <code>git log</code> may reveal issues</li> <li>Read Context: CAG files have accumulated wisdom</li> </ol>"},{"location":"quickstart/#next-steps","title":"\ud83d\udea6 Next Steps","text":"<ol> <li>Read your specific role instructions (CLAUDE.md or GEMINI.md)</li> <li>Explore the CAG System</li> <li>Review Current Context</li> <li>Check Active Projects</li> </ol> <p>Pro Tip</p> <p>The CAG (Core Agent Gateway) is your knowledge base. When in doubt, start with <code>/srv/CAG/core.json</code> for system configuration and <code>/srv/CAG/index.md</code> for navigation.</p>"},{"location":"architecture/","title":"Architecture Overview","text":"<p>The DAI/PAI ecosystem is built on a modular, microservices architecture designed for reliability, scalability, and AI-native operations.</p>"},{"location":"architecture/#system-overview","title":"System Overview","text":"<pre><code>graph TB\n    subgraph \"External Services\"\n        GH[GitHub]\n        GS[Google Services]\n        AI[AI APIs]\n    end\n\n    subgraph \"Edge Layer\"\n        CF[Cloudflare]\n        SSL[Let's Encrypt]\n    end\n\n    subgraph \"Web Layer\"\n        NGINX[nginx]\n    end\n\n    subgraph \"Application Layer\"\n        AUTH[Auth Service]\n        PB[Pastebin]\n        PAI[PAI Web]\n        DOCS[Documentation]\n        API[Tools API]\n    end\n\n    subgraph \"Core Services\"\n        DAI[DAI System]\n        PAIS[PAI System]\n        TASK[Task Engine]\n    end\n\n    subgraph \"Data Layer\"\n        CTX[Context Library]\n        LOGS[Logs]\n        TOKENS[Tokens]\n    end\n\n    CF --&gt; NGINX\n    NGINX --&gt; AUTH\n    NGINX --&gt; PB\n    NGINX --&gt; PAI\n    NGINX --&gt; DOCS\n    NGINX --&gt; API\n\n    AUTH --&gt; TOKENS\n    PAI --&gt; TASK\n    API --&gt; DAI\n    API --&gt; PAIS\n\n    DAI --&gt; CTX\n    PAIS --&gt; CTX\n    TASK --&gt; CTX\n\n    DAI --&gt; GH\n    PAIS --&gt; GS\n    API --&gt; AI</code></pre>"},{"location":"architecture/#core-principles","title":"Core Principles","text":""},{"location":"architecture/#1-ai-first-design","title":"1. AI-First Design","text":"<ul> <li>Every component is designed to be operated by AI agents</li> <li>APIs are self-documenting and discoverable</li> <li>State is explicitly tracked in the Context Library</li> </ul>"},{"location":"architecture/#2-modular-architecture","title":"2. Modular Architecture","text":"<ul> <li>Each service is independent and single-purpose</li> <li>Services communicate via well-defined APIs</li> <li>Failure of one service doesn't cascade</li> </ul>"},{"location":"architecture/#3-security-by-design","title":"3. Security by Design","text":"<ul> <li>Multiple authentication layers</li> <li>Encrypted secrets management (dotenv-vault)</li> <li>Principle of least privilege</li> </ul>"},{"location":"architecture/#4-observable-systems","title":"4. Observable Systems","text":"<ul> <li>Comprehensive logging</li> <li>Real-time monitoring</li> <li>Self-reporting capabilities</li> </ul>"},{"location":"architecture/#infrastructure-components","title":"Infrastructure Components","text":""},{"location":"architecture/#web-server-nginx","title":"Web Server (nginx)","text":"<ul> <li>Reverse proxy for all services</li> <li>SSL termination</li> <li>Basic authentication</li> <li>Request routing</li> </ul>"},{"location":"architecture/#application-services","title":"Application Services","text":"<ul> <li>Authentication (port 8091): Cookie-based auth</li> <li>Pastebin (port 8090): File and text sharing</li> <li>PAI Web (port 8080): Web interface</li> <li>Tools API (port 8001): Programmatic access</li> <li>Documentation: This MkDocs site</li> </ul>"},{"location":"architecture/#core-systems","title":"Core Systems","text":"<ul> <li>DAI: Infrastructure management</li> <li>PAI: Personal assistant functions</li> <li>Task Engine: Background job processing</li> </ul>"},{"location":"architecture/#data-storage","title":"Data Storage","text":"<ul> <li>Context Library: System state tracking</li> <li>Logs: Centralized logging</li> <li>Tokens: Authentication credentials</li> </ul>"},{"location":"architecture/#design-decisions","title":"Design Decisions","text":""},{"location":"architecture/#why-microservices","title":"Why Microservices?","text":"<ul> <li>Isolation: Services can fail independently</li> <li>Scalability: Services can scale individually</li> <li>Maintainability: Easier to understand and modify</li> <li>AI-Friendly: Clear boundaries for AI operations</li> </ul>"},{"location":"architecture/#why-nginx","title":"Why nginx?","text":"<ul> <li>Performance: Efficient reverse proxy</li> <li>Flexibility: Easy configuration</li> <li>Security: Battle-tested security features</li> <li>Compatibility: Works with all backend services</li> </ul>"},{"location":"architecture/#why-file-based-storage","title":"Why File-Based Storage?","text":"<ul> <li>Simplicity: No database complexity</li> <li>Git-Friendly: Version control for everything</li> <li>AI-Accessible: Easy for agents to read/write</li> <li>Portable: Easy backup and migration</li> </ul>"},{"location":"architecture/#security-architecture","title":"Security Architecture","text":""},{"location":"architecture/#authentication-layers","title":"Authentication Layers","text":"<ol> <li>Cloudflare: DDoS protection and CDN</li> <li>nginx: Basic HTTP authentication</li> <li>Application: Service-specific auth</li> <li>API: Token-based authentication</li> </ol>"},{"location":"architecture/#secret-management","title":"Secret Management","text":"<ul> <li>Environment variables via <code>.env</code> files</li> <li>Encrypted storage with dotenv-vault</li> <li>No hardcoded credentials</li> <li>Regular rotation policies</li> </ul>"},{"location":"architecture/#scalability-considerations","title":"Scalability Considerations","text":""},{"location":"architecture/#current-scale","title":"Current Scale","text":"<ul> <li>Single server deployment</li> <li>Suitable for personal/small team use</li> <li>Sub-second response times</li> <li>Minimal resource usage</li> </ul>"},{"location":"architecture/#future-scaling","title":"Future Scaling","text":"<ul> <li>Horizontal scaling via load balancer</li> <li>Service containerization</li> <li>Database for high-volume data</li> <li>CDN for static assets</li> </ul>"},{"location":"architecture/#see-also","title":"See Also","text":"<ul> <li>DAI System Architecture</li> <li>PAI System Architecture</li> <li>Infrastructure Details</li> <li>Security Model</li> </ul>"},{"location":"context/","title":"Context Library","text":"<p>The Context Library is DAI/PAI's knowledge management system, containing accumulated wisdom, architectural decisions, and operational knowledge.</p>"},{"location":"context/#overview","title":"Overview","text":"<p>The Context Library serves as the living memory of the DAI/PAI ecosystem. It includes:</p> <ul> <li>CAG System: Core Agent Gateway - structured knowledge base</li> <li>Current Context: Active operational context and state</li> <li>Development Context: In-progress features and experiments</li> <li>Archives: Historical context and deprecated information</li> </ul>"},{"location":"context/#cag-core-agent-gateway","title":"CAG (Core Agent Gateway)","text":"<p>The CAG system is the primary knowledge base for AI agents operating within the DAI/PAI ecosystem.</p>"},{"location":"context/#key-components","title":"Key Components","text":"<ul> <li>CAG Index - Master index and navigation guide</li> <li>CAG Core - Structured configuration data</li> <li>CAG Architecture - System design decisions</li> <li>CAG Operations - Current operational state</li> <li>CAG Learnings - Accumulated best practices</li> </ul>"},{"location":"context/#usage-guidelines","title":"Usage Guidelines","text":"<ol> <li>Start with the Index: Always begin with cag-index.md for navigation</li> <li>Check Core Data: Use cag-core.json for paths, ports, and configs</li> <li>Understand Architecture: Review cag-architecture.md for design rationale</li> <li>Monitor Operations: Check cag-operations.md for current status</li> <li>Learn from History: Consult cag-learnings.md for troubleshooting</li> </ol>"},{"location":"context/#current-context","title":"Current Context","text":"<p>Active operational context files that guide day-to-day operations:</p> <ul> <li>System state and health</li> <li>Active projects and priorities</li> <li>Temporary configurations</li> <li>Work-in-progress documentation</li> </ul>"},{"location":"context/#archives","title":"Archives","text":"<p>Historical context preserved for reference:</p> <ul> <li>Deprecated configurations</li> <li>Old architectural decisions</li> <li>Past incident reports</li> <li>Legacy documentation</li> </ul>"},{"location":"context/#best-practices","title":"Best Practices","text":""},{"location":"context/#reading-context","title":"Reading Context","text":"<ul> <li>Always start with the most specific context first</li> <li>Check timestamps and versions</li> <li>Cross-reference with operational data</li> </ul>"},{"location":"context/#updating-context","title":"Updating Context","text":"<ul> <li>Keep updates atomic and focused</li> <li>Include timestamps and authorship</li> <li>Link related changes</li> <li>Archive outdated information properly</li> </ul>"},{"location":"context/#context-hygiene","title":"Context Hygiene","text":"<ul> <li>Review and clean up quarterly</li> <li>Move stale content to archives</li> <li>Update indexes when structure changes</li> <li>Maintain clear navigation paths</li> </ul>"},{"location":"context/#quick-reference","title":"Quick Reference","text":"Context Type Location Purpose CAG System <code>/context/cag/</code> Core knowledge base Current <code>/context/current/</code> Active operational context Development <code>/context/development/</code> Work in progress Archives <code>/context/archives/</code> Historical reference <p>Pro Tip</p> <p>The CAG system is designed for AI consumption. Keep entries structured, clear, and machine-readable.</p>"},{"location":"context/#related-documentation","title":"Related Documentation","text":"<ul> <li>Architecture Overview</li> <li>Operations Guide</li> <li>API Documentation</li> </ul>"},{"location":"context/archives/","title":"Context Archives","text":"<p>Historical context preserved for reference. Organized by date and topic.</p>"},{"location":"context/archives/#archive-structure","title":"Archive Structure","text":"<p>Archives are organized by: - Year/Quarter - For time-based archives - Topic - For subject-specific archives - Project - For project-related archives</p>"},{"location":"context/archives/#2025-q1-archives","title":"2025 Q1 Archives","text":""},{"location":"context/archives/#documentation-migration","title":"Documentation Migration","text":"<ul> <li>Original documentation structure before MkDocs migration</li> <li>Legacy context files from pre-consolidation era</li> </ul>"},{"location":"context/archives/#2024-archives","title":"2024 Archives","text":"<p>To be migrated from /srv/context/archives/</p>"},{"location":"context/archives/#accessing-archives","title":"Accessing Archives","text":"<p>Archives are stored in subdirectories: - Time-based: <code>/context/archives/2025/Q1/</code> - Topic-based: <code>/context/archives/topics/</code> - Project-based: <code>/context/archives/projects/</code></p>"},{"location":"context/archives/#archive-policy","title":"Archive Policy","text":""},{"location":"context/archives/#what-gets-archived","title":"What Gets Archived","text":"<ul> <li>Deprecated configurations</li> <li>Old architectural decisions</li> <li>Completed project documentation</li> <li>Superseded procedures</li> <li>Historical incident reports</li> </ul>"},{"location":"context/archives/#when-to-archive","title":"When to Archive","text":"<ul> <li>Quarterly reviews</li> <li>Major system changes</li> <li>Project completions</li> <li>Documentation overhauls</li> </ul>"},{"location":"context/archives/#how-to-archive","title":"How to Archive","text":"<ol> <li>Create appropriate subdirectory</li> <li>Move files with clear naming</li> <li>Add README explaining context</li> <li>Update this index</li> <li>Remove from active documentation</li> </ol>"},{"location":"context/archives/#quick-search","title":"Quick Search","text":"<p>To search archives: <pre><code>grep -r \"search_term\" /srv/apps/docs/docs/context/archives/\n</code></pre></p> <p>Warning</p> <p>Archives are for reference only. Do not use archived configurations or procedures in production.</p>"},{"location":"context/current/","title":"Current Context","text":"<p>This page tracks the current operational context of the DAI/PAI system.</p>"},{"location":"context/current/#system-status","title":"System Status","text":"<p>Last Updated: 2025-07-17</p>"},{"location":"context/current/#service-health","title":"Service Health","text":"<ul> <li>\u2705 All core services operational</li> <li>\u2705 Documentation site deployed (https://docs.kaut.to)</li> <li>\u2705 PAI Dashboard running</li> <li>\u2705 Task API functional</li> <li>\u2705 Tools API operational</li> </ul>"},{"location":"context/current/#recent-changes","title":"Recent Changes","text":"<ul> <li>Migrated documentation to MkDocs at https://docs.kaut.to</li> <li>Updated CLAUDE.md and GEMINI.md with new documentation paths</li> <li>Cleaned up repository structure (/srv/.git removed)</li> <li>Created new apps repository on GitHub</li> </ul>"},{"location":"context/current/#active-projects","title":"Active Projects","text":""},{"location":"context/current/#in-progress","title":"In Progress","text":"<ol> <li>Documentation Migration - Moving all docs to MkDocs</li> <li>Context Library Consolidation - Organizing scattered documentation</li> <li>Repository Cleanup - Archiving old files and organizing structure</li> </ol>"},{"location":"context/current/#planned","title":"Planned","text":"<ol> <li>Automated Documentation Builds - GitHub Actions integration</li> <li>Search Enhancement - Improving documentation search</li> <li>AI Update Endpoints - Programmatic documentation updates</li> </ol>"},{"location":"context/current/#known-issues","title":"Known Issues","text":""},{"location":"context/current/#minor","title":"Minor","text":"<ul> <li>Some navigation links in docs point to not-yet-created pages</li> <li>Old documentation paths still referenced in some scripts</li> </ul>"},{"location":"context/current/#resolved-recently","title":"Resolved Recently","text":"<ul> <li>nginx SSL cipher configuration fixed</li> <li>MkDocs analytics provider issue resolved</li> <li>Repository merge conflicts resolved</li> </ul>"},{"location":"context/current/#temporary-configurations","title":"Temporary Configurations","text":"<p>None currently active.</p>"},{"location":"context/current/#work-in-progress","title":"Work in Progress","text":""},{"location":"context/current/#documentation-migration-status","title":"Documentation Migration Status","text":"<ul> <li> CAG files migrated</li> <li> /srv/docs content pending</li> <li> /srv/specs content pending</li> <li> /srv/context remaining files pending</li> <li> PAI documentation pending</li> </ul>"},{"location":"context/current/#quick-commands","title":"Quick Commands","text":"<pre><code># Rebuild documentation\ncd /srv/apps/docs &amp;&amp; source venv/bin/activate &amp;&amp; mkdocs build\n\n# Check service status\nsudo systemctl status kaut-pastebin pai-web kaut-auth kaut-api\n\n# View recent logs\nsudo journalctl -u pai-web -f --since \"1 hour ago\"\n</code></pre>"},{"location":"context/current/#contact-points","title":"Contact Points","text":"<ul> <li>Documentation: https://docs.kaut.to</li> <li>PAI Dashboard: https://kaut.to/ai/</li> <li>Task Manager: https://kaut.to/tasks/</li> <li>Pastebin: https://pb.kaut.to</li> </ul> <p>Note</p> <p>This is a living document. Update whenever significant changes occur to maintain accurate operational context.</p>"},{"location":"context/cag/cag-architecture/","title":"CAG Architecture","text":"<p>Version: 3.1</p> <p>This document outlines the technical architecture and design decisions for the DAI system.</p>"},{"location":"context/cag/cag-architecture/#1-system-architecture","title":"1. System Architecture","text":""},{"location":"context/cag/cag-architecture/#11-core-design-v03","title":"1.1. Core Design (v0.3)","text":"<ul> <li>AI-First: Primary intelligence is in Claude prompts, not Python logic.</li> <li>Simple Wrappers: Python scripts are thin wrappers around the Claude CLI.</li> <li>Session-Based: Conversations use fixed sessions for different domains.</li> <li>Toolkit Architecture: Lightweight, cached tools for speed and monitoring.</li> </ul>"},{"location":"context/cag/cag-architecture/#12-technical-stack","title":"1.2. Technical Stack","text":"<ul> <li>Language: Python 3.10+</li> <li>AI: Claude CLI (Anthropic)</li> <li>APIs: Google Workspace</li> <li>Communication: Slack Webhooks</li> <li>Scheduling: System Cron</li> <li>Authentication: OAuth2 &amp; Google Service Accounts</li> </ul>"},{"location":"context/cag/cag-architecture/#2-design-decisions","title":"2. Design Decisions","text":""},{"location":"context/cag/cag-architecture/#21-claude-first-architecture","title":"2.1. Claude-First Architecture","text":"<ul> <li>Decision: Move all complex logic to Claude prompts.</li> <li>Rationale: Enables rapid iteration and changes without code deployment.</li> <li>Result: 90% reduction in Python code complexity.</li> </ul>"},{"location":"context/cag/cag-architecture/#22-toolkit-vs-jtools","title":"2.2. <code>toolkit</code> vs. <code>jtools</code>","text":"<ul> <li><code>jtools</code>: Full-featured CLI tools for human use.</li> <li><code>toolkit</code>: Lightweight, single-purpose, cached tools for AI/monitoring.</li> <li>Benefit: 10x faster execution for automated tasks.</li> </ul>"},{"location":"context/cag/cag-architecture/#3-integration-data-flow","title":"3. Integration &amp; Data Flow","text":""},{"location":"context/cag/cag-architecture/#31-data-flow-diagram","title":"3.1. Data Flow Diagram","text":"<pre><code>Google APIs -&gt; Collectors -&gt; Cache -&gt; Processors -&gt; Claude -&gt; Slack\n</code></pre>"},{"location":"context/cag/cag-architecture/#32-error-handling-strategy","title":"3.2. Error Handling Strategy","text":"<ol> <li>Collector Level: Fallback to cache on API failure.</li> <li>Processor Level: Skip analysis if no data is available.</li> <li>Claude Level: Use fallback routing on API timeout.</li> <li>Slack Level: Route all errors to a verbose debug channel.</li> </ol>"},{"location":"context/cag/cag-architecture/#33-security-architecture","title":"3.3. Security Architecture","text":"<ul> <li>Tokens: Stored in <code>/srv/tokens/</code> with <code>600</code> permissions.</li> <li>Service Accounts: Granted read-only access where possible.</li> <li>Webhooks/Secrets: Sourced exclusively from <code>.env</code> files.</li> <li>Logs: Sanitized to remove sensitive data.</li> </ul>"},{"location":"context/cag/cag-architecture/#4-future-architecture-roadmap","title":"4. Future Architecture Roadmap","text":"<ul> <li>v0.4 - Self-Healing: Automated error recovery, token refresh, and service restarts.</li> <li>v0.5 - Distributed: Multi-server redundancy and shared state management.</li> <li>v1.0 - Full Autonomy: Predictive monitoring and self-modifying prompts.</li> </ul>"},{"location":"context/cag/cag-index/","title":"CAG Index: AI Knowledge Base","text":"<p>Version: 3.1</p> <p>This is the master index for the Core Agent Gateway (CAG) knowledge base. Start here to understand the system architecture, operations, and learned best practices.</p>"},{"location":"context/cag/cag-index/#1-core-configuration-cag-corejson","title":"1. Core Configuration (<code>CAG-core.json</code>)","text":"<p>For all structured data, paths, credentials, and service definitions, refer to <code>CAG-core.json</code>. This is the single source of truth for machine-readable configuration.</p> <ul> <li>Paths: All key directory paths (<code>/srv</code>, <code>/srv/jtools</code>, etc.).</li> <li>Services: All running services, ports, and public domains.</li> <li>Authentication: API key locations, OAuth token paths, and service account details.</li> <li>Repositories: Git repository URLs and descriptions.</li> <li>Schedules: All cron job schedules.</li> </ul>"},{"location":"context/cag/cag-index/#2-system-architecture-cag-architecturemd","title":"2. System Architecture (<code>CAG-architecture.md</code>)","text":"<p>This document outlines the \"why\" behind the system's design.</p> <ul> <li>Core Design Principles: \"Claude-first,\" session management, etc.</li> <li>Technical Stack: Languages, APIs, and key technologies.</li> <li>Design Decisions: Rationale for key architectural choices.</li> <li>Integration Patterns: Data flow and error handling strategies.</li> <li>Future Plans: High-level roadmap for v0.4 and beyond.</li> </ul>"},{"location":"context/cag/cag-index/#3-operations-current-state-cag-operationsmd","title":"3. Operations &amp; Current State (<code>CAG-operations.md</code>)","text":"<p>This document provides a real-time snapshot of the system's health and status.</p> <ul> <li>System Health: What's working, what's broken.</li> <li>Active Monitors: Details on all running monitoring agents.</li> <li>Operational Procedures: Checklists for daily maintenance and emergency recovery.</li> <li>Performance Metrics: Key performance indicators (KPIs) for system response times and resource usage.</li> </ul>"},{"location":"context/cag/cag-index/#4-learnings-best-practices-cag-learningsmd","title":"4. Learnings &amp; Best Practices (<code>CAG-learnings.md</code>)","text":"<p>This document is a collection of troubleshooting guides, lessons learned, and best practices.</p> <ul> <li>Critical Learnings: High-impact lessons from past incidents.</li> <li>Common Issues &amp; Fixes: A \"FAQ\" for debugging common problems.</li> <li>Best Practices: A list of \"do's\" and \"don'ts\" for development.</li> <li>Anti-Patterns: A list of things to avoid.</li> </ul>"},{"location":"context/cag/cag-index/#5-primary-documentation-hub-srvdocsindexmd","title":"5. Primary Documentation Hub (<code>/srv/docs/index.md</code>)","text":"<p>For user-facing documentation, guides, and detailed specifications, refer to the main documentation hub at <code>/srv/docs/index.md</code>.</p>"},{"location":"context/cag/cag-learnings/","title":"CAG Learnings &amp; Best Practices","text":"<p>Version: 3.1</p> <p>This document is a collection of troubleshooting guides, lessons learned, and best practices.</p>"},{"location":"context/cag/cag-learnings/#1-critical-learnings","title":"1. Critical Learnings","text":""},{"location":"context/cag/cag-learnings/#11-python-environment-2025-07-17","title":"1.1. Python Environment (2025-07-17)","text":"<ul> <li>Problem: <code>ModuleNotFoundError</code> for both pip-installed and local packages.</li> <li>Root Cause: System-level Python environment is unreliable. Conflicts exist between global and user <code>site-packages</code>.</li> <li>Solution: Always use a virtual environment. A <code>venv</code> has been created at <code>/srv/jtools/.venv</code>. All development on <code>jtools</code> must be done using this interpreter. See <code>/srv/jtools/PYTHON_DEVELOPMENT_GUIDE.md</code>.</li> </ul>"},{"location":"context/cag/cag-learnings/#12-ssl-subdomain-access-2025-07-15","title":"1.2. SSL &amp; Subdomain Access (2025-07-15)","text":"<ul> <li>Problem: New subdomains were inaccessible from the internet.</li> <li>Root Cause: Split DNS. The main domain was proxied, while subdomains pointed directly to the server, which was firewalled.</li> <li>Lesson: Ensure subdomains and the main domain resolve to the same IP, especially when a proxy or CDN is in use.</li> </ul>"},{"location":"context/cag/cag-learnings/#13-claude-cli-context-2025-07-05","title":"1.3. Claude CLI Context (2025-07-05)","text":"<ul> <li>Problem: \"Prompt too long\" errors in cron jobs.</li> <li>Root Cause: Using the <code>-c</code> flag accumulates context indefinitely.</li> <li>Solution: Use stateless calls (no <code>-c</code> or <code>-r</code>) for frequent, repetitive tasks. Use session-based calls (<code>-r &lt;session_id&gt;</code>) for coherent, multi-turn conversations.</li> </ul>"},{"location":"context/cag/cag-learnings/#14-github-projects-api-2025-07-17","title":"1.4. GitHub Projects API (2025-07-17)","text":"<ul> <li>Problem: Unable to create GitHub project boards programmatically.</li> <li>Root Cause: GitHub Projects (classic) has been deprecated in favor of the new Projects experience.</li> <li>Solution: Use GitHub Issues with labels and milestones for task tracking. The new Projects API requires GraphQL and is more complex. For simple task management, issues are sufficient.</li> <li>Lesson: Check API deprecation notices. GitHub CLI (<code>gh</code>) doesn't support the new Projects API directly.</li> </ul>"},{"location":"context/cag/cag-learnings/#15-documentation-consolidation-2025-07-17","title":"1.5. Documentation Consolidation (2025-07-17)","text":"<ul> <li>Problem: Documentation scattered across multiple locations with no unified search capability (CAG files, /docs/, context library, inline comments).</li> <li>Root Cause: Organic growth led to documentation being created wherever it was most convenient at the time.</li> <li>Solution: MkDocs with Material theme provides a unified documentation site with powerful search, navigation, and organization features.</li> <li>Key Insight: Static site generators work exceptionally well for AI agents because they use simple markdown files that can be easily read, edited, and searched programmatically.</li> <li>Lesson: When choosing tools for AI-first systems, prioritize simplicity and file-based approaches over complex databases or proprietary formats. The easier it is for an AI to read and modify content, the more effective the system will be.</li> </ul>"},{"location":"context/cag/cag-learnings/#2-best-practices","title":"2. Best Practices","text":""},{"location":"context/cag/cag-learnings/#21-development","title":"2.1. Development","text":"<ul> <li>Virtual Environments: All Python projects MUST use a virtual environment (<code>venv</code>).</li> <li>Version Control: Do not commit secrets, backups, or virtual environment directories (<code>.venv/</code>). Use <code>.gitignore</code>.</li> <li>Modularity: Break down large scripts into smaller, single-purpose modules.</li> <li>Configuration: Use <code>.env</code> files for all secrets and environment-specific configuration. Do not hardcode credentials.</li> </ul>"},{"location":"context/cag/cag-learnings/#22-monitoring","title":"2.2. Monitoring","text":"<ul> <li>Stateless by Default: Monitoring scripts should be stateless to avoid context overflow.</li> <li>Progressive Disclosure: Use different Slack channels for different alert severities (e.g., <code>urgent</code>, <code>notifications</code>, <code>verbose</code>).</li> <li>Actionable Alerts: Alerts should provide context and suggest a clear next step.</li> </ul>"},{"location":"context/cag/cag-learnings/#23-prompt-engineering","title":"2.3. Prompt Engineering","text":"<ul> <li>Be Specific: Provide clear, direct instructions.</li> <li>Use Examples: Include few-shot examples in prompts for complex tasks.</li> <li>Update Prompts, Not Code: For AI-first applications, iterate on the prompts before refactoring the code.</li> </ul>"},{"location":"context/cag/cag-learnings/#3-common-issues-fixes","title":"3. Common Issues &amp; Fixes","text":"<ul> <li>Issue: \"No routing decisions from Claude\"</li> <li>Cause: Session timeout or API overload.</li> <li> <p>Fix: 1. Check Claude status. 2. Restart the monitoring script.</p> </li> <li> <p>Issue: Email monitor stops detecting new emails.</p> </li> <li> <p>Fixes: <pre><code># 1. Check for a valid, non-expired token\npython3 /srv/pai/toolkit/gmail_tool.py --account all auth-test\n\n# 2. Clear a potentially stuck cache\nrm /tmp/pai_emails_cache.json\n</code></pre></p> </li> <li> <p>Issue: Calendar conflicts are not detected.</p> </li> <li>Cause: The calendar has not been shared with the service account.</li> <li>Fix: Share the Google Calendar with <code>pai-assistant@personal-ai-453416.iam.gserviceaccount.com</code>.</li> </ul>"},{"location":"context/cag/cag-operations/","title":"CAG Operations","text":"<p>Version: 3.1 Last Updated: 2025-07-17T16:00:00Z</p> <p>This document provides a real-time snapshot of the system's health, active processes, and operational procedures.</p>"},{"location":"context/cag/cag-operations/#1-current-system-state","title":"1. Current System State","text":""},{"location":"context/cag/cag-operations/#11-health-summary","title":"1.1. Health Summary","text":"<ul> <li>Overall Status: DEGRADED</li> <li>Reason: Python environment issues are blocking development and refactoring.</li> <li>Active Blockers: <code>ModuleNotFoundError</code>, local package import failures.</li> <li>Remediation: A virtual environment (<code>.venv</code>) has been created in <code>/srv/jtools/</code> to provide a stable development environment.</li> </ul>"},{"location":"context/cag/cag-operations/#12-service-status","title":"1.2. Service Status","text":"<ul> <li>PAI v0.3 (Claude-brain): Working</li> <li>Multi-account Email Monitoring: Working</li> <li>Slack Integration (3-channel): Working</li> <li>Morning Brief (6 AM): Working</li> <li>PAI Web Dashboard: Working (https://kaut.to/ai/)</li> <li>Pastebin Service: Working (https://pb.kaut.to)</li> <li>Task API Backend: Working</li> </ul>"},{"location":"context/cag/cag-operations/#13-known-issues","title":"1.3. Known Issues","text":"<ul> <li>Slack bot crashes occasionally (event loop errors).</li> <li>Task monitoring is not fully configured.</li> <li>Some deprecated services may still exist in <code>systemd</code>.</li> </ul>"},{"location":"context/cag/cag-operations/#2-monitoring-operations","title":"2. Monitoring Operations","text":""},{"location":"context/cag/cag-operations/#21-active-monitors","title":"2.1. Active Monitors","text":"<ol> <li>Email Monitor: Every 10 mins. Multi-account collection and Claude-powered routing.</li> <li>Morning Brief: 6:00 AM daily. Calendar summary and conflict detection.</li> <li>System Status: Hourly. Component health checks and auto-alerts.</li> </ol>"},{"location":"context/cag/cag-operations/#22-key-operational-procedures","title":"2.2. Key Operational Procedures","text":""},{"location":"context/cag/cag-operations/#daily-maintenance","title":"Daily Maintenance","text":"<pre><code># Check system health\npython3 /srv/pai/monitoring/update_system_status.py\n\n# View recent errors\ntail -100 /srv/pai/monitoring/logs/*.log | grep ERROR\n</code></pre>"},{"location":"context/cag/cag-operations/#authentication-refresh","title":"Authentication Refresh","text":"<pre><code># Gmail (if needed)\npython3 /srv/pai/toolkit/gmail_tool.py auth\n\n# Tasks (if needed)\npython3 /srv/pai/toolkit/gtask.py auth\n</code></pre>"},{"location":"context/cag/cag-operations/#emergency-recovery","title":"Emergency Recovery","text":"<pre><code># Restart monitoring (restarted by cron)\npkill -f email_monitor\n\n# Clear all caches\nrm -f /tmp/pai_*.json\n</code></pre>"},{"location":"context/cag/cag-operations/#3-performance-metrics","title":"3. Performance Metrics","text":"<ul> <li>Avg. Response Time (Email Check): ~5 seconds</li> <li>Avg. Response Time (Calendar Fetch): ~3 seconds</li> <li>Avg. Response Time (Claude Analysis): ~8 seconds</li> <li>Avg. Resource Usage (CPU): &lt; 5%</li> <li>Avg. Resource Usage (Memory): ~200MB (Python)</li> </ul>"},{"location":"guides/browser-testing/","title":"Browser Testing Guide","text":""},{"location":"guides/browser-testing/#overview","title":"Overview","text":"<p>The browser testing toolkit allows DAI to perform automated UI testing with real-time visual feedback that you can watch at test.kaut.to.</p>"},{"location":"guides/browser-testing/#quick-start","title":"Quick Start","text":""},{"location":"guides/browser-testing/#1-start-the-testing-environment","title":"1. Start the Testing Environment","text":"<pre><code>cd /srv/apps/browser-test\ndocker-compose up -d\n</code></pre>"},{"location":"guides/browser-testing/#2-view-live-tests","title":"2. View Live Tests","text":"<p>Visit https://test.kaut.to (auth: kaut:to)</p>"},{"location":"guides/browser-testing/#3-run-tests","title":"3. Run Tests","text":"<pre><code># Test pastebin upload\npython3 /srv/toolkit/browser_test.py --test upload\n\n# Test clipboard functionality\npython3 /srv/toolkit/browser_test.py --test clipboard\n\n# Run all tests\npython3 /srv/toolkit/browser_test.py --test all\n</code></pre>"},{"location":"guides/browser-testing/#features","title":"Features","text":""},{"location":"guides/browser-testing/#real-time-viewing","title":"Real-Time Viewing","text":"<ul> <li>Watch tests execute in real-time</li> <li>No software installation needed</li> <li>Works from any device</li> </ul>"},{"location":"guides/browser-testing/#multiple-browsers","title":"Multiple Browsers","text":"<ul> <li>Chrome (port 7900)</li> <li>Firefox (port 7901)</li> <li>More browsers coming soon</li> </ul>"},{"location":"guides/browser-testing/#test-capabilities","title":"Test Capabilities","text":"<ul> <li>Click elements</li> <li>Fill forms</li> <li>Upload files</li> <li>Take screenshots</li> <li>Verify content</li> </ul>"},{"location":"guides/browser-testing/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   test.kaut.to  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Browser Test    \u2502\n\u2502   (Web UI)      \u2502     \u2502  Dashboard       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                       \u2502\n         \u25bc                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Chrome with    \u2502     \u2502  Firefox with    \u2502\n\u2502  noVNC (7900)   \u2502     \u2502  noVNC (7901)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                       \u2502\n         \u25bc                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Selenium Grid Hub (4444)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/browser-testing/#writing-tests","title":"Writing Tests","text":""},{"location":"guides/browser-testing/#basic-test-structure","title":"Basic Test Structure","text":"<pre><code>from browser_test import BrowserTest\n\n# Create test instance\ntest = BrowserTest(browser='chrome')\ntest.setup()\n\n# Navigate to site\ntest.driver.get(\"https://pb.kaut.to\")\n\n# Find and click element\nbutton = test.driver.find_element(By.ID, \"submit-button\")\nbutton.click()\n\n# Clean up\ntest.teardown()\n</code></pre>"},{"location":"guides/browser-testing/#best-practices","title":"Best Practices","text":"<ol> <li>Always use explicit waits</li> <li>Take screenshots on errors</li> <li>Use meaningful test names</li> <li>Clean up test data</li> <li>Test multiple browsers</li> </ol>"},{"location":"guides/browser-testing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/browser-testing/#container-issues","title":"Container Issues","text":"<pre><code># Check container status\ndocker ps\n\n# View logs\ndocker logs selenium-chrome\n\n# Restart containers\ndocker-compose restart\n</code></pre>"},{"location":"guides/browser-testing/#connection-issues","title":"Connection Issues","text":"<ul> <li>Ensure ports 7900, 7901, 4444 are not in use</li> <li>Check firewall allows Docker traffic</li> <li>Verify nginx is running</li> </ul>"},{"location":"guides/browser-testing/#test-failures","title":"Test Failures","text":"<ul> <li>Screenshots saved to <code>/srv/apps/browser-test/</code></li> <li>Check browser console for errors</li> <li>Verify selectors are correct</li> <li>Ensure page fully loaded</li> </ul>"},{"location":"guides/browser-testing/#advanced-usage","title":"Advanced Usage","text":""},{"location":"guides/browser-testing/#headless-testing","title":"Headless Testing","text":"<pre><code>python3 /srv/toolkit/browser_test.py --headless --browser chrome\n</code></pre>"},{"location":"guides/browser-testing/#custom-tests","title":"Custom Tests","text":"<p>Add new test methods to <code>/srv/toolkit/browser_test.py</code></p>"},{"location":"guides/browser-testing/#video-recording","title":"Video Recording","text":"<p>Coming soon - automatic test recording</p>"},{"location":"guides/browser-testing/#security-notes","title":"Security Notes","text":"<ul> <li>VNC has no password for ease of use</li> <li>Access controlled by nginx auth</li> <li>Containers isolated in Docker network</li> <li>No sensitive data in test environment</li> </ul>"},{"location":"guides/getting-started/","title":"Getting Started","text":"<p>Welcome to the DAI/PAI ecosystem! This guide will help you get up and running quickly.</p> <p>AI Agent?</p> <p>If you're an AI agent, check out the Quick Start Guide for AI-specific onboarding.</p>"},{"location":"guides/getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have:</p> <ul> <li>Server: Ubuntu 22.04 LTS or similar Linux distribution</li> <li>Domain: A domain name with DNS control</li> <li>Python: Version 3.10 or higher</li> <li>Node.js: For certain applications (optional)</li> <li>Git: For version control</li> </ul>"},{"location":"guides/getting-started/#quick-setup","title":"Quick Setup","text":""},{"location":"guides/getting-started/#1-universal-setup-script","title":"1. Universal Setup Script","text":"<p>The fastest way to get started is using our universal setup script:</p> <pre><code>curl -s https://kaut:to@kaut.to/setup | bash\n</code></pre> <p>This script will: - Create workspace at <code>~/kwork/</code> - Install dependencies - Pull credentials from vault - Clone necessary repositories - Set up the complete environment</p>"},{"location":"guides/getting-started/#2-manual-setup","title":"2. Manual Setup","text":"<p>If you prefer manual setup:</p>"},{"location":"guides/getting-started/#clone-the-apps-repository","title":"Clone the Apps Repository","text":"<pre><code>git clone https://github.com/jkautto/apps.git /srv/apps\ncd /srv/apps\n</code></pre>"},{"location":"guides/getting-started/#set-up-environment","title":"Set Up Environment","text":"<pre><code># Create .env file\ncat &gt; .env &lt;&lt; EOF\n# Add your API keys here\nGITHUB_PAT=your-github-token\nGEMINI_API_KEY=your-gemini-key\n# ... other keys\nEOF\n\n# Secure the file\nchmod 600 .env\n</code></pre>"},{"location":"guides/getting-started/#install-dependencies","title":"Install Dependencies","text":"<p>Each application has its own dependencies. For example:</p> <pre><code># Documentation site\ncd docs\npython3 -m venv venv\nsource venv/bin/activate\npip install -r requirements.txt\n\n# Pastebin service\ncd ../pastebin\n# Follow pastebin README\n</code></pre>"},{"location":"guides/getting-started/#core-components","title":"Core Components","text":""},{"location":"guides/getting-started/#1-dai-development-ai-infrastructure","title":"1. DAI (Development AI Infrastructure)","text":"<ul> <li>Purpose: Manages infrastructure and technical systems</li> <li>Location: <code>/srv/</code></li> <li>Key Files: </li> <li><code>/srv/CAG/</code> - Core knowledge base</li> <li><code>/srv/context/</code> - System state</li> </ul>"},{"location":"guides/getting-started/#2-pai-personal-ai-assistant","title":"2. PAI (Personal AI Assistant)","text":"<ul> <li>Purpose: Personal assistant for daily tasks</li> <li>Location: <code>/srv/pai/</code></li> <li>Services:</li> <li>Email monitoring</li> <li>Calendar management</li> <li>Task scheduling</li> <li>Slack integration</li> </ul>"},{"location":"guides/getting-started/#3-web-applications","title":"3. Web Applications","text":"<p>Located in <code>/srv/apps/</code>: - auth: Authentication service - pastebin: File sharing - browser-test: Testing infrastructure - shifts: Scheduling application - docs: This documentation</p>"},{"location":"guides/getting-started/#basic-operations","title":"Basic Operations","text":""},{"location":"guides/getting-started/#starting-services","title":"Starting Services","text":"<p>Most services are managed by systemd:</p> <pre><code># Check service status\nsudo systemctl status pai-web\n\n# Start a service\nsudo systemctl start pai-web\n\n# Enable auto-start\nsudo systemctl enable pai-web\n</code></pre>"},{"location":"guides/getting-started/#accessing-applications","title":"Accessing Applications","text":"<ul> <li>Main Site: https://kaut.to</li> <li>Documentation: https://docs.kaut.to</li> <li>Pastebin: https://pb.kaut.to</li> <li>Auth Portal: https://auth.kaut.to</li> <li>Dev Dashboard: https://dev.kaut.to</li> </ul> <p>Default credentials: - Username: <code>joni</code> - Password: <code>Penacova</code></p>"},{"location":"guides/getting-started/#checking-logs","title":"Checking Logs","text":"<pre><code># System logs\nsudo journalctl -u nginx -f\n\n# Application logs\ntail -f /srv/pai/logs/app.log\n\n# All logs\nls /srv/logs/\n</code></pre>"},{"location":"guides/getting-started/#next-steps","title":"Next Steps","text":"<p>Now that you have the basics:</p> <ol> <li>Explore the Architecture: Learn how the system is designed</li> <li> <p>Architecture Overview</p> </li> <li> <p>Set Up Development Environment: Configure your local development</p> </li> <li> <p>Development Setup</p> </li> <li> <p>Learn Authentication: Understand the security model</p> </li> <li> <p>Authentication Guide</p> </li> <li> <p>Try the APIs: Start building with our APIs</p> </li> <li>API Reference</li> </ol>"},{"location":"guides/getting-started/#common-issues","title":"Common Issues","text":""},{"location":"guides/getting-started/#port-already-in-use","title":"Port Already in Use","text":"<pre><code># Find process using port\nsudo lsof -i :8080\n\n# Kill process if needed\nsudo kill -9 &lt;PID&gt;\n</code></pre>"},{"location":"guides/getting-started/#permission-denied","title":"Permission Denied","text":"<pre><code># Fix ownership\nsudo chown -R $USER:$USER /srv/apps\n\n# Fix permissions\nchmod 755 /srv/apps\n</code></pre>"},{"location":"guides/getting-started/#service-wont-start","title":"Service Won't Start","text":"<pre><code># Check logs\nsudo journalctl -u service-name -n 50\n\n# Verify configuration\nnginx -t\n</code></pre>"},{"location":"guides/getting-started/#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: You're here! Use the search function</li> <li>Logs: Check <code>/srv/logs/</code> for detailed information</li> <li>Context: Review <code>/srv/context/current/</code> for system state</li> <li>Code: Browse https://github.com/jkautto/</li> </ul>"},{"location":"guides/getting-started/#tips-for-ai-agents","title":"Tips for AI Agents","text":"<p>If you're an AI agent working with this system:</p> <ol> <li>Always check context first: <code>/srv/context/current/</code></li> <li>Use structured commands: Follow the patterns in guides</li> <li>Update documentation: Keep docs current as you work</li> <li>Log your actions: Help future agents understand changes</li> </ol> <p>Ready to Go!</p> <p>You now have the basics to start working with the DAI/PAI ecosystem.  Explore the documentation to learn more about specific components.</p>"},{"location":"operations/backup-recovery/","title":"Backup &amp; Recovery","text":"<p>Comprehensive backup and recovery procedures for the DAI/PAI ecosystem.</p>"},{"location":"operations/backup-recovery/#backup-strategy","title":"Backup Strategy","text":""},{"location":"operations/backup-recovery/#what-gets-backed-up","title":"What Gets Backed Up","text":"<ul> <li>Code: All repositories pushed to GitHub</li> <li>Configuration: /srv/.env, service configs</li> <li>Data: SQLite databases, logs, tokens</li> <li>Documentation: Now in GitHub via apps repo</li> </ul>"},{"location":"operations/backup-recovery/#backup-schedule","title":"Backup Schedule","text":"<ul> <li>Daily: Automated git commits and pushes</li> <li>Weekly: Full system state snapshot</li> <li>Monthly: Archived backup to external storage</li> </ul>"},{"location":"operations/backup-recovery/#automated-backups","title":"Automated Backups","text":""},{"location":"operations/backup-recovery/#repository-backups","title":"Repository Backups","text":"<p>All code is automatically backed up via Git: <pre><code># DAI repository\ncd /srv &amp;&amp; git push\n\n# PAI repository  \ncd /srv/pai &amp;&amp; git push\n\n# Apps repository\ncd /srv/apps &amp;&amp; git push\n</code></pre></p>"},{"location":"operations/backup-recovery/#database-backups","title":"Database Backups","text":"<pre><code># Backup Pastebin database\ncp /srv/apps/pastebin/pastebin.db /srv/backups/pastebin-$(date +%Y%m%d).db\n\n# Backup task database\ncp /srv/pai/data/tasks.db /srv/backups/tasks-$(date +%Y%m%d).db\n</code></pre>"},{"location":"operations/backup-recovery/#configuration-backups","title":"Configuration Backups","text":"<pre><code># Backup environment files\ncp /srv/.env /srv/backups/env-$(date +%Y%m%d)\ncp /var/www/.env /srv/backups/www-env-$(date +%Y%m%d)\n\n# Backup nginx configs\nsudo cp -r /etc/nginx/sites-available /srv/backups/nginx-$(date +%Y%m%d)\n</code></pre>"},{"location":"operations/backup-recovery/#recovery-procedures","title":"Recovery Procedures","text":""},{"location":"operations/backup-recovery/#service-recovery","title":"Service Recovery","text":"<ol> <li> <p>Identify failed service <pre><code>systemctl status [service-name]\n</code></pre></p> </li> <li> <p>Check logs <pre><code>journalctl -u [service-name] --since \"1 hour ago\"\n</code></pre></p> </li> <li> <p>Restart service <pre><code>sudo systemctl restart [service-name]\n</code></pre></p> </li> </ol>"},{"location":"operations/backup-recovery/#database-recovery","title":"Database Recovery","text":"<pre><code># Stop affected service\nsudo systemctl stop pai-web\n\n# Restore database\ncp /srv/backups/tasks-YYYYMMDD.db /srv/pai/data/tasks.db\n\n# Restart service\nsudo systemctl start pai-web\n</code></pre>"},{"location":"operations/backup-recovery/#full-system-recovery","title":"Full System Recovery","text":"<ol> <li>Boot from backup</li> <li>Restore repositories from GitHub</li> <li>Restore databases from backups</li> <li>Restore environment files</li> <li>Restart all services</li> </ol>"},{"location":"operations/backup-recovery/#disaster-recovery-plan","title":"Disaster Recovery Plan","text":""},{"location":"operations/backup-recovery/#level-1-service-failure","title":"Level 1: Service Failure","text":"<ul> <li>Single service down</li> <li>Use systemctl restart</li> <li>Recovery time: &lt; 5 minutes</li> </ul>"},{"location":"operations/backup-recovery/#level-2-data-corruption","title":"Level 2: Data Corruption","text":"<ul> <li>Database or file corruption</li> <li>Restore from daily backup</li> <li>Recovery time: &lt; 30 minutes</li> </ul>"},{"location":"operations/backup-recovery/#level-3-system-failure","title":"Level 3: System Failure","text":"<ul> <li>Full system compromise</li> <li>Restore from snapshot</li> <li>Recovery time: &lt; 2 hours</li> </ul>"},{"location":"operations/backup-recovery/#backup-verification","title":"Backup Verification","text":""},{"location":"operations/backup-recovery/#weekly-checks","title":"Weekly Checks","text":"<pre><code># Verify backup files exist\nls -la /srv/backups/\n\n# Test database integrity\nsqlite3 /srv/backups/pastebin-*.db \"PRAGMA integrity_check;\"\n\n# Verify git repositories\ncd /srv &amp;&amp; git status\ncd /srv/pai &amp;&amp; git status\n</code></pre>"},{"location":"operations/backup-recovery/#monthly-tests","title":"Monthly Tests","text":"<ul> <li>Restore database to test environment</li> <li>Verify service starts with restored data</li> <li>Document any issues found</li> </ul>"},{"location":"operations/backup-recovery/#important-files","title":"Important Files","text":""},{"location":"operations/backup-recovery/#critical-paths","title":"Critical Paths","text":"<pre><code>/srv/.env                    # Main environment variables\n/var/www/.env               # Web environment variables\n/srv/tokens/                # OAuth tokens\n/etc/nginx/sites-available/ # Nginx configs\n/srv/pai/data/             # PAI databases\n/srv/apps/pastebin/        # Pastebin data\n</code></pre>"},{"location":"operations/backup-recovery/#backup-locations","title":"Backup Locations","text":"<pre><code>/srv/backups/              # Local backups\nGitHub repositories        # Code backups\nExternal storage          # Monthly archives\n</code></pre>"},{"location":"operations/backup-recovery/#recovery-checklist","title":"Recovery Checklist","text":"<ul> <li> Identify scope of failure</li> <li> Stop affected services</li> <li> Restore from appropriate backup</li> <li> Verify data integrity</li> <li> Restart services</li> <li> Test functionality</li> <li> Document incident</li> </ul>"},{"location":"operations/backup-recovery/#related-documentation","title":"Related Documentation","text":"<ul> <li>Daily Maintenance</li> <li>Emergency Procedures</li> <li>System Health Check</li> </ul> <p>Important</p> <p>Always test backups regularly. An untested backup is not a backup!</p>"},{"location":"operations/claude-sessions/","title":"Claude CLI Session Management","text":"<p>Purpose: Manage Claude CLI sessions effectively to prevent context issues and optimize performance.</p>"},{"location":"operations/claude-sessions/#understanding-claude-sessions","title":"Understanding Claude Sessions","text":"<p>Claude CLI maintains conversation context in sessions. Each session accumulates context until cleared or reset.</p>"},{"location":"operations/claude-sessions/#key-concepts","title":"Key Concepts","text":"<ul> <li>Session ID: Unique identifier for each conversation</li> <li>Context Window: Limited size (~200k tokens)</li> <li>Context Accumulation: Each interaction adds to context</li> <li>Stateless Mode: No session persistence (recommended for cron)</li> </ul>"},{"location":"operations/claude-sessions/#common-session-commands","title":"Common Session Commands","text":"<pre><code># List all sessions\nclaude list\n\n# View specific session\nclaude view SESSION_ID\n\n# Create new session\nclaude new\n\n# Kill session\nclaude kill SESSION_ID\n\n# Kill all sessions\nclaude kill --all\n</code></pre>"},{"location":"operations/claude-sessions/#best-practices","title":"Best Practices","text":""},{"location":"operations/claude-sessions/#1-for-cron-jobs-use-stateless-mode","title":"1. For Cron Jobs - Use Stateless Mode","text":"<pre><code># Good - No context accumulation\necho \"$PROMPT\" | claude -p\n\n# Bad - Accumulates context\necho \"$PROMPT\" | claude -p -c\n\n# Bad - Uses persistent session\necho \"$PROMPT\" | claude -r SESSION_ID\n</code></pre>"},{"location":"operations/claude-sessions/#2-for-interactive-work-use-sessions","title":"2. For Interactive Work - Use Sessions","text":"<pre><code># Create dedicated session\nclaude new --name \"pai-monitoring\"\n\n# Resume session\nclaude -r SESSION_ID\n\n# Or use the default\nclaude\n</code></pre>"},{"location":"operations/claude-sessions/#3-for-long-running-monitors","title":"3. For Long-Running Monitors","text":"<p>Create separate sessions for different purposes: <pre><code># Email monitoring session\nMONITORING_SESSION=$(claude new --name \"monitoring\" -j | jq -r .id)\n\n# Development session  \nDEV_SESSION=$(claude new --name \"development\" -j | jq -r .id)\n</code></pre></p>"},{"location":"operations/claude-sessions/#troubleshooting-session-issues","title":"Troubleshooting Session Issues","text":""},{"location":"operations/claude-sessions/#prompt-too-long-error","title":"\"Prompt too long\" Error","text":"<p>Cause: Context window exceeded.</p> <p>Fix: <pre><code># For cron scripts - remove -c flag\nsed -i 's/claude -p -c/claude -p/g' /path/to/script.sh\n\n# For interactive - start fresh session\nclaude new\n</code></pre></p>"},{"location":"operations/claude-sessions/#session-not-found-error","title":"\"Session not found\" Error","text":"<p>Cause: Session was killed or expired.</p> <p>Fix: <pre><code># Check if session exists\nclaude list | grep SESSION_ID\n\n# Create new if needed\nNEW_SESSION=$(claude new -j | jq -r .id)\necho \"New session: $NEW_SESSION\"\n</code></pre></p>"},{"location":"operations/claude-sessions/#sessions-growing-too-large","title":"Sessions Growing Too Large","text":"<p>Monitor session sizes: <pre><code># Check all session sizes (approximate)\nfor session in $(claude list -j | jq -r '.[].id'); do\n  echo \"Session $session:\"\n  claude view $session | wc -c\ndone\n</code></pre></p> <p>Clean up large sessions: <pre><code># Kill sessions over 100KB\nfor session in $(claude list -j | jq -r '.[].id'); do\n  size=$(claude view $session | wc -c)\n  if [ $size -gt 100000 ]; then\n    echo \"Killing large session $session (${size} bytes)\"\n    claude kill $session\n  fi\ndone\n</code></pre></p>"},{"location":"operations/claude-sessions/#session-management-for-paidai","title":"Session Management for PAI/DAI","text":""},{"location":"operations/claude-sessions/#current-session-architecture","title":"Current Session Architecture","text":"<ol> <li>Main Development - Interactive DAI session (this one)</li> <li>Monitoring - Used by monitoring scripts (should be stateless)</li> <li>Slack Integration - Handles Slack routing (should be stateless)</li> </ol>"},{"location":"operations/claude-sessions/#recommended-changes","title":"Recommended Changes","text":"<pre><code># Update monitoring scripts to be stateless\n# In /srv/pai/monitoring/email_monitor.py:\n# Change: claude -p -c\n# To: claude -p\n\n# In /srv/pai/intelligence_stack/processors/heartbeat_intelligent.sh:\n# Already fixed - uses claude -p without -c\n</code></pre>"},{"location":"operations/claude-sessions/#session-monitoring-script","title":"Session Monitoring Script","text":"<p>Create <code>/srv/pai/monitoring/check_claude_sessions.sh</code>: <pre><code>#!/bin/bash\n# Check Claude session health\n\necho \"=== Claude Session Status ===\"\necho \"Active sessions:\"\nclaude list\n\necho -e \"\\n=== Session Sizes ===\"\nfor session in $(claude list -j | jq -r '.[].id'); do\n  size=$(claude view $session 2&gt;/dev/null | wc -c)\n  echo \"Session $session: $size bytes\"\ndone\n\necho -e \"\\n=== Recommendations ===\"\n# Check for oversized sessions\nfor session in $(claude list -j | jq -r '.[].id'); do\n  size=$(claude view $session 2&gt;/dev/null | wc -c)\n  if [ $size -gt 100000 ]; then\n    echo \"\u26a0\ufe0f  Session $session is large ($size bytes) - consider killing\"\n  fi\ndone\n\n# Check for monitoring using sessions\nif grep -q \"claude.*-c\" /srv/pai/monitoring/*.py 2&gt;/dev/null; then\n  echo \"\u26a0\ufe0f  Found monitoring scripts using -c flag (context accumulation)\"\nfi\n</code></pre></p>"},{"location":"operations/claude-sessions/#prevention-strategies","title":"Prevention Strategies","text":""},{"location":"operations/claude-sessions/#1-use-aliases-for-common-operations","title":"1. Use Aliases for Common Operations","text":"<p>Add to <code>.bashrc</code>: <pre><code>alias claude-monitoring='claude -p'  # Stateless for scripts\nalias claude-dev='claude'            # Interactive with context\n</code></pre></p>"},{"location":"operations/claude-sessions/#2-regular-cleanup-cron","title":"2. Regular Cleanup Cron","text":"<p>Add to crontab: <pre><code># Weekly Claude session cleanup (Sundays at 3 AM)\n0 3 * * 0 /srv/pai/monitoring/cleanup_claude_sessions.sh\n</code></pre></p>"},{"location":"operations/claude-sessions/#3-monitor-in-heartbeat","title":"3. Monitor in Heartbeat","text":"<p>Add Claude session checks to heartbeat monitoring: - Check number of active sessions - Alert if any session &gt; 100KB - Alert if monitoring using -c flag</p>"},{"location":"operations/claude-sessions/#quick-reference","title":"Quick Reference","text":"Use Case Command Why Cron jobs <code>claude -p</code> No context accumulation Monitoring <code>claude -p</code> Stateless, won't overflow Development <code>claude</code> or <code>claude -r ID</code> Maintains helpful context One-off tasks <code>claude -p</code> Clean, no side effects"},{"location":"operations/claude-sessions/#related-documentation","title":"Related Documentation","text":"<ul> <li><code>common-issues.md</code> - See \"Claude CLI Issues\" section</li> <li><code>monitoring-alerts.md</code> - Claude-based alert routing</li> <li>PAI system uses Claude SDK at specific model: <code>claude-3-5-sonnet-20241022</code></li> </ul>"},{"location":"operations/daily-maintenance/","title":"Daily Maintenance","text":"<p>Daily maintenance procedures to keep the DAI/PAI ecosystem running smoothly.</p>"},{"location":"operations/daily-maintenance/#morning-checklist","title":"Morning Checklist","text":""},{"location":"operations/daily-maintenance/#1-system-health-check","title":"1. System Health Check","text":"<p>Run the comprehensive health check: <pre><code># Check all services\nsudo systemctl status kaut-pastebin pai-web kaut-auth kaut-api\n\n# Check disk space\ndf -h /srv\n\n# Check system resources\nhtop\n</code></pre></p>"},{"location":"operations/daily-maintenance/#2-service-verification","title":"2. Service Verification","text":"<p>Verify each service is responding: <pre><code># Test PAI Dashboard\ncurl -I https://kaut.to/ai/ --user joni:Penacova\n\n# Test Task API\ncurl https://kaut.to/api/health\n\n# Test Pastebin\ncurl -I https://pb.kaut.to --user kaut:to\n</code></pre></p>"},{"location":"operations/daily-maintenance/#3-log-review","title":"3. Log Review","text":"<p>Check for errors or warnings: <pre><code># Check PAI logs\nsudo journalctl -u pai-web --since \"24 hours ago\" | grep -E \"ERROR|WARNING\"\n\n# Check API logs\nsudo journalctl -u kaut-api --since \"24 hours ago\" | grep -E \"ERROR|WARNING\"\n\n# Check nginx logs\nsudo tail -100 /var/log/nginx/error.log\n</code></pre></p>"},{"location":"operations/daily-maintenance/#4-authentication-status","title":"4. Authentication Status","text":"<p>Verify OAuth tokens: <pre><code># Check Google OAuth\npython3 /srv/jtools/gtask/gtask.py list\n\n# Check Slack bot status\npython3 /srv/pai/monitors/slack_health_check.py\n</code></pre></p>"},{"location":"operations/daily-maintenance/#weekly-tasks","title":"Weekly Tasks","text":""},{"location":"operations/daily-maintenance/#monday-backup-check","title":"Monday - Backup Check","text":"<ul> <li>Verify backup scripts are running</li> <li>Check backup integrity</li> <li>Review backup storage space</li> </ul>"},{"location":"operations/daily-maintenance/#wednesday-security-review","title":"Wednesday - Security Review","text":"<ul> <li>Review authentication logs</li> <li>Check for unusual access patterns</li> <li>Update passwords if needed</li> </ul>"},{"location":"operations/daily-maintenance/#friday-performance-review","title":"Friday - Performance Review","text":"<ul> <li>Analyze service response times</li> <li>Check token usage metrics</li> <li>Review system resource trends</li> </ul>"},{"location":"operations/daily-maintenance/#monthly-tasks","title":"Monthly Tasks","text":""},{"location":"operations/daily-maintenance/#first-monday","title":"First Monday","text":"<ul> <li>Full system backup</li> <li>Archive old logs</li> <li>Clean temporary files</li> </ul>"},{"location":"operations/daily-maintenance/#third-monday","title":"Third Monday","text":"<ul> <li>Review and update documentation</li> <li>Check for system updates</li> <li>Review SSL certificate expiration</li> </ul>"},{"location":"operations/daily-maintenance/#quick-recovery-procedures","title":"Quick Recovery Procedures","text":""},{"location":"operations/daily-maintenance/#service-down","title":"Service Down","text":"<pre><code># Restart specific service\nsudo systemctl restart [service-name]\n\n# Check service logs\nsudo journalctl -u [service-name] -f\n</code></pre>"},{"location":"operations/daily-maintenance/#authentication-issues","title":"Authentication Issues","text":"<pre><code># Refresh Google OAuth\ncd /srv/jtools &amp;&amp; python3 gtask/gtask.py auth\n\n# Fix Slack token\nexport SLACK_BOT_TOKEN=$(cat /srv/tokens/slack_bot_token.txt)\n</code></pre>"},{"location":"operations/daily-maintenance/#disk-space-issues","title":"Disk Space Issues","text":"<pre><code># Clean old logs\nfind /srv/pai/logs -name \"*.log\" -mtime +7 -delete\n\n# Clean pip cache\npip cache purge\n\n# Remove old Docker images\ndocker image prune -a\n</code></pre>"},{"location":"operations/daily-maintenance/#monitoring-commands","title":"Monitoring Commands","text":""},{"location":"operations/daily-maintenance/#real-time-monitoring","title":"Real-time Monitoring","text":"<pre><code># Watch service status\nwatch -n 5 'systemctl status pai-web kaut-api'\n\n# Monitor logs\ntail -f /srv/pai/logs/app.log\n\n# Track resource usage\nhtop\n</code></pre>"},{"location":"operations/daily-maintenance/#performance-metrics","title":"Performance Metrics","text":"<pre><code># Check response times\ntime curl https://kaut.to/api/health\n\n# Monitor network connections\nss -tulpn | grep LISTEN\n\n# Check process memory\nps aux | grep python | sort -k 6 -n -r | head\n</code></pre>"},{"location":"operations/daily-maintenance/#emergency-contacts","title":"Emergency Contacts","text":"<ul> <li>Primary: Check HANDOVER.md for current on-call</li> <li>Escalation: See emergency procedures</li> <li>Documentation: https://docs.kaut.to</li> </ul>"},{"location":"operations/daily-maintenance/#related-documentation","title":"Related Documentation","text":"<ul> <li>System Health Check Details</li> <li>Troubleshooting Guide</li> <li>Emergency Procedures</li> <li>Token Optimization</li> </ul> <p>Pro Tip</p> <p>Set up these checks as aliases in your <code>.bashrc</code> for quick access: <pre><code>alias health='sudo systemctl status kaut-pastebin pai-web kaut-auth kaut-api'\nalias logs='sudo journalctl -u pai-web -f --since \"1 hour ago\"'\n</code></pre></p>"},{"location":"operations/emergency-procedures/","title":"Emergency Procedures","text":"<p>Quick reference for handling critical system failures and emergencies.</p>"},{"location":"operations/emergency-procedures/#emergency-response-framework","title":"Emergency Response Framework","text":""},{"location":"operations/emergency-procedures/#severity-levels","title":"Severity Levels","text":"Level Description Response Time Examples P1 Critical - System Down &lt; 15 min All services offline, data loss risk P2 Major - Degraded Service &lt; 1 hour Single service down, auth failures P3 Minor - Limited Impact &lt; 4 hours Slow response, minor errors P4 Low - Cosmetic Issues Next day UI glitches, non-critical warnings"},{"location":"operations/emergency-procedures/#p1-critical-emergencies","title":"P1: Critical Emergencies","text":""},{"location":"operations/emergency-procedures/#total-system-failure","title":"Total System Failure","text":"<pre><code># 1. Check server accessibility\nping kaut.to\n\n# 2. SSH to server\nssh kaut\n\n# 3. Check all services\nsudo systemctl status --all | grep kaut\n\n# 4. Emergency restart\nsudo systemctl restart nginx\nsudo systemctl restart pai-web kaut-api kaut-pastebin kaut-auth\n</code></pre>"},{"location":"operations/emergency-procedures/#data-loss-prevention","title":"Data Loss Prevention","text":"<pre><code># STOP all write operations immediately\nsudo systemctl stop pai-web kaut-api\n\n# Create emergency backup\nsudo cp -r /srv /emergency-backup-$(date +%Y%m%d-%H%M%S)\n\n# Check filesystem\ndf -h\nsudo dmesg | tail -50\n</code></pre>"},{"location":"operations/emergency-procedures/#p2-service-failures","title":"P2: Service Failures","text":""},{"location":"operations/emergency-procedures/#pai-dashboard-down","title":"PAI Dashboard Down","text":"<pre><code># Quick recovery\nsudo systemctl restart pai-web\n\n# If persists, check logs\nsudo journalctl -u pai-web -n 100\n\n# Manual start for debugging\ncd /srv/pai &amp;&amp; python3 app.py\n</code></pre>"},{"location":"operations/emergency-procedures/#authentication-failures","title":"Authentication Failures","text":"<pre><code># Check nginx auth\nsudo nginx -t\nsudo tail -f /var/log/nginx/error.log\n\n# Verify htpasswd file\nls -la /etc/nginx/auth/.htpasswd\n\n# Test authentication\ncurl -I https://kaut.to --user joni:Penacova\n</code></pre>"},{"location":"operations/emergency-procedures/#api-service-issues","title":"API Service Issues","text":"<pre><code># Restart API service\nsudo systemctl restart kaut-api\n\n# Check port binding\nsudo lsof -i :8002\n\n# Test API endpoint\ncurl http://localhost:8002/health\n</code></pre>"},{"location":"operations/emergency-procedures/#p3-performance-issues","title":"P3: Performance Issues","text":""},{"location":"operations/emergency-procedures/#high-cpu-usage","title":"High CPU Usage","text":"<pre><code># Identify culprit\nhtop\nps aux | sort -k 3 -n -r | head\n\n# Kill runaway process\nkill -9 [PID]\n\n# Check for loops in logs\ntail -f /srv/pai/logs/app.log\n</code></pre>"},{"location":"operations/emergency-procedures/#memory-exhaustion","title":"Memory Exhaustion","text":"<pre><code># Check memory usage\nfree -h\nps aux | sort -k 4 -n -r | head\n\n# Clear caches\nsync &amp;&amp; echo 3 &gt; /proc/sys/vm/drop_caches\n\n# Restart memory-heavy services\nsudo systemctl restart pai-web\n</code></pre>"},{"location":"operations/emergency-procedures/#disk-space-critical","title":"Disk Space Critical","text":"<pre><code># Find large files\ndu -h /srv | sort -h | tail -20\n\n# Clean logs\nfind /srv -name \"*.log\" -mtime +7 -delete\n\n# Clean pip cache\npip cache purge\n</code></pre>"},{"location":"operations/emergency-procedures/#recovery-procedures","title":"Recovery Procedures","text":""},{"location":"operations/emergency-procedures/#quick-service-recovery","title":"Quick Service Recovery","text":"<ol> <li>Identify - Which service is down?</li> <li>Isolate - Stop dependent services</li> <li>Restart - Use systemctl restart</li> <li>Verify - Check service status</li> <li>Test - Confirm functionality</li> </ol>"},{"location":"operations/emergency-procedures/#roll-back-changes","title":"Roll Back Changes","text":"<pre><code># If recent change caused issues\ncd /srv/apps &amp;&amp; git log --oneline -10\ngit revert HEAD\n\n# Rebuild if needed\ncd /srv/apps/docs &amp;&amp; mkdocs build\n</code></pre>"},{"location":"operations/emergency-procedures/#emergency-contacts","title":"Emergency Contacts","text":"<ol> <li>Check <code>/srv/HANDOVER.md</code> for current status</li> <li>Review recent commits for changes</li> <li>Check monitoring alerts</li> </ol>"},{"location":"operations/emergency-procedures/#common-error-patterns","title":"Common Error Patterns","text":""},{"location":"operations/emergency-procedures/#502-bad-gateway","title":"\"502 Bad Gateway\"","text":"<pre><code># Usually means backend service is down\nsudo systemctl status pai-web kaut-api\nsudo systemctl restart pai-web kaut-api\n</code></pre>"},{"location":"operations/emergency-procedures/#connection-refused","title":"\"Connection Refused\"","text":"<pre><code># Service not listening on port\nsudo lsof -i :8001 :8002 :8080 :8090 :8091\n# Restart affected service\n</code></pre>"},{"location":"operations/emergency-procedures/#permission-denied","title":"\"Permission Denied\"","text":"<pre><code># Fix file permissions\nsudo chown -R joni:joni /srv\nsudo chmod -R 755 /srv/apps\n</code></pre>"},{"location":"operations/emergency-procedures/#post-incident","title":"Post-Incident","text":""},{"location":"operations/emergency-procedures/#documentation","title":"Documentation","text":"<ol> <li>Create incident report in <code>/srv/docs/incidents/</code></li> <li>Update this guide with new procedures</li> <li>Add to monitoring if applicable</li> </ol>"},{"location":"operations/emergency-procedures/#prevention","title":"Prevention","text":"<ol> <li>Identify root cause</li> <li>Implement monitoring</li> <li>Create automated recovery</li> <li>Update documentation</li> </ol>"},{"location":"operations/emergency-procedures/#emergency-command-reference","title":"Emergency Command Reference","text":"<pre><code># Service management\nsudo systemctl status --all | grep -E \"pai|kaut\"\nsudo systemctl restart pai-web kaut-api kaut-pastebin kaut-auth\n\n# Log analysis\nsudo journalctl --since \"1 hour ago\" | grep ERROR\ntail -f /var/log/nginx/error.log\n\n# Resource monitoring\nhtop\ndf -h\nfree -h\n\n# Network checks\nss -tulpn | grep LISTEN\nping -c 3 kaut.to\n\n# Quick backup\ntar -czf emergency-backup-$(date +%Y%m%d).tar.gz /srv\n</code></pre>"},{"location":"operations/emergency-procedures/#related-documentation","title":"Related Documentation","text":"<ul> <li>Daily Maintenance</li> <li>Troubleshooting Guide</li> <li>Backup &amp; Recovery</li> <li>System Monitoring</li> </ul> <p>Remember</p> <p>In an emergency, prioritize: 1. Data preservation - Don't lose user data 2. Service restoration - Get back online 3. Root cause analysis - Prevent recurrence</p>"},{"location":"operations/monitoring/","title":"System Health Check Runbook","text":"<p>Purpose: Daily verification that all PAI/DAI components are functioning correctly.</p> <p>Frequency: Daily at start of workday, or when issues are suspected.</p>"},{"location":"operations/monitoring/#prerequisites","title":"Prerequisites","text":"<ul> <li>SSH access to server</li> <li>Understanding of PAI architecture</li> <li>Access to Slack channels (#pai, #pai-verbose)</li> </ul>"},{"location":"operations/monitoring/#steps","title":"Steps","text":""},{"location":"operations/monitoring/#1-run-automated-health-check","title":"1. Run Automated Health Check","text":"<pre><code>python3 /srv/pai/monitoring/update_system_status.py\n</code></pre> <p>Expected output: Overall health &gt; 80%</p>"},{"location":"operations/monitoring/#2-verify-critical-processes","title":"2. Verify Critical Processes","text":""},{"location":"operations/monitoring/#check-slack-bot","title":"Check Slack Bot","text":"<pre><code># Check if running\nps aux | grep slack.py | grep -v grep\n\n# If not running, check PID file\ncat /srv/pai/slack_v2.pid\nps -p $(cat /srv/pai/slack_v2.pid)\n\n# View recent logs\ntail -50 /srv/pai/logs/slack_bot.log\n</code></pre>"},{"location":"operations/monitoring/#check-claude-sessions","title":"Check Claude Sessions","text":"<pre><code># List active Claude sessions\nclaude list\n\n# Check for stuck sessions\nps aux | grep claude | grep -v grep\n</code></pre>"},{"location":"operations/monitoring/#3-verify-cron-jobs","title":"3. Verify Cron Jobs","text":"<pre><code># List user crons\ncrontab -l | grep -E \"(morning_brief|email_monitor|heartbeat)\"\n\n# Check recent cron execution\ngrep \"$(date '+%Y-%m-%d')\" /srv/pai/intelligence_stack/logs/cron.log\n</code></pre> <p>Expected crons: - Morning Brief: 6 AM daily - Email Monitor: Every 10-60 min (based on time) - Heartbeat: Every 30 min</p>"},{"location":"operations/monitoring/#4-check-authentication-status","title":"4. Check Authentication Status","text":""},{"location":"operations/monitoring/#gmail-token","title":"Gmail Token","text":"<p><pre><code>python3 /srv/pai/toolkit/gmail_tool.py auth\n</code></pre> Should show: \"Token expires in X hours\"</p>"},{"location":"operations/monitoring/#calendar-access","title":"Calendar Access","text":"<p><pre><code>python3 /srv/pai/intelligence_stack/collectors/calendar_collector.py --test\n</code></pre> Should return today's events</p>"},{"location":"operations/monitoring/#5-review-logs-for-errors","title":"5. Review Logs for Errors","text":"<pre><code># Check for recent errors\nfor log in /srv/pai/monitoring/logs/*.log /srv/pai/intelligence_stack/logs/*.log; do\n    echo \"=== $log ===\"\n    tail -20 \"$log\" | grep -i error | tail -5\ndone\n</code></pre>"},{"location":"operations/monitoring/#6-verify-disk-space","title":"6. Verify Disk Space","text":"<pre><code>df -h /srv\ndu -sh /srv/pai/logs /srv/pai/monitoring/logs /srv/pai/intelligence_stack/logs\n</code></pre> <p>Warning if: - Disk usage &gt; 80% - Any log directory &gt; 1GB</p>"},{"location":"operations/monitoring/#7-test-slack-integration","title":"7. Test Slack Integration","text":"<p>Send test message: <pre><code>echo \"Health check test at $(date)\" | python3 /srv/pai/toolkit/slack_sender_multichannel.py --channel verbose\n</code></pre></p> <p>Check #pai-verbose for the message.</p>"},{"location":"operations/monitoring/#troubleshooting","title":"Troubleshooting","text":""},{"location":"operations/monitoring/#if-slack-bot-is-down","title":"If Slack Bot is Down","text":"<p>See <code>slack-bot-recovery.md</code></p>"},{"location":"operations/monitoring/#if-tokens-are-expired","title":"If Tokens are Expired","text":"<p>See <code>token-refresh.md</code></p>"},{"location":"operations/monitoring/#if-crons-arent-running","title":"If Crons Aren't Running","text":"<ol> <li>Check cron service: <code>systemctl status cron</code></li> <li>Review cron logs: <code>grep CRON /var/log/syslog | tail -20</code></li> <li>Test individual scripts manually</li> </ol>"},{"location":"operations/monitoring/#if-health-70","title":"If Health &lt; 70%","text":"<ol> <li>Run this health check manually</li> <li>Check <code>incident-response.md</code></li> <li>Alert in #pai channel if critical</li> </ol>"},{"location":"operations/monitoring/#success-criteria","title":"Success Criteria","text":"<ul> <li> Overall health &gt; 80%</li> <li> All critical processes running</li> <li> No authentication errors</li> <li> Disk usage &lt; 80%</li> <li> Recent activity in logs</li> <li> Slack test message delivered</li> </ul>"},{"location":"operations/monitoring/#notes","title":"Notes","text":"<ul> <li>Morning Brief runs at 6 AM UTC</li> <li>Email monitoring frequency varies by time of day</li> <li>Heartbeat provides self-healing capabilities</li> <li>Always check #pai-verbose for detailed system activity</li> </ul>"},{"location":"operations/slack-recovery/","title":"Slack Bot Recovery Playbook","text":"<p>Purpose: Restore Slack bot functionality when it crashes or stops responding.</p> <p>Symptoms: - No messages in Slack channels - Process not running - Event loop errors in logs</p>"},{"location":"operations/slack-recovery/#quick-recovery-try-first","title":"Quick Recovery (Try First)","text":"<pre><code>cd /srv/pai\n./start_slack_bot.sh\n</code></pre> <p>If successful, verify in #pai-verbose channel.</p>"},{"location":"operations/slack-recovery/#detailed-recovery-steps","title":"Detailed Recovery Steps","text":""},{"location":"operations/slack-recovery/#1-check-current-status","title":"1. Check Current Status","text":"<pre><code># Check if process exists\nps aux | grep -E \"slack|pai\" | grep -v grep\n\n# Check PID file\ncat /srv/pai/slack_v2.pid\nps -p $(cat /srv/pai/slack_v2.pid)\n\n# Check logs for errors\ntail -50 /srv/pai/logs/slack_bot.log\n</code></pre>"},{"location":"operations/slack-recovery/#2-stop-any-stuck-processes","title":"2. Stop Any Stuck Processes","text":"<pre><code># Kill by PID file\nkill $(cat /srv/pai/slack_v2.pid) 2&gt;/dev/null\n\n# Kill any slack.py processes\npkill -f slack.py\n\n# Kill any slack_bot processes\npkill -f slack_bot\n\n# Wait for cleanup\nsleep 3\n</code></pre>"},{"location":"operations/slack-recovery/#3-clear-stale-files","title":"3. Clear Stale Files","text":"<pre><code># Remove PID file if process is dead\nrm -f /srv/pai/slack_v2.pid\n\n# Clear any lock files\nrm -f /tmp/slack_bot.lock\n</code></pre>"},{"location":"operations/slack-recovery/#4-start-fresh-instance","title":"4. Start Fresh Instance","text":"<pre><code>cd /srv/pai\n\n# Try the wrapper script first\n./start_slack_bot.sh\n\n# If that fails, start directly\nnohup python3 slack.py &gt; logs/slack_bot.log 2&gt;&amp;1 &amp;\necho $! &gt; slack_v2.pid\n</code></pre>"},{"location":"operations/slack-recovery/#5-verify-operation","title":"5. Verify Operation","text":"<pre><code># Check process started\nps -p $(cat /srv/pai/slack_v2.pid)\n\n# Monitor logs for startup\ntail -f /srv/pai/logs/slack_bot.log\n# (Ctrl+C to exit)\n\n# Send test message\necho \"Slack bot restarted at $(date)\" | \\\n  python3 /srv/pai/toolkit/slack_sender_multichannel.py --channel verbose\n</code></pre>"},{"location":"operations/slack-recovery/#common-issues-and-solutions","title":"Common Issues and Solutions","text":""},{"location":"operations/slack-recovery/#event-loop-is-closed-error","title":"\"Event loop is closed\" Error","text":"<p>This happens when the async event loop crashes.</p> <p>Solution: 1. Kill all python processes related to slack 2. Clear any stale async locks: <code>rm -f /tmp/slack_*.lock</code> 3. Restart with fresh process</p>"},{"location":"operations/slack-recovery/#bad-file-descriptor-error","title":"\"Bad file descriptor\" Error","text":"<p>Network connection was lost.</p> <p>Solution: 1. Check network connectivity: <code>ping api.slack.com</code> 2. Restart the bot 3. Check Slack webhook is valid</p>"},{"location":"operations/slack-recovery/#bot-starts-but-no-messages","title":"Bot Starts But No Messages","text":"<p>Could be webhook or authentication issue.</p> <p>Solution: 1. Test webhook directly: <pre><code>curl -X POST -H 'Content-type: application/json' \\\n  --data '{\"text\":\"Webhook test\"}' \\\n  $(grep SLACK_WEBHOOK_VERBOSE /srv/.env | cut -d'=' -f2)\n</code></pre> 2. Check webhook URLs in <code>/srv/.env</code> 3. Verify Slack user ID in bot configuration</p>"},{"location":"operations/slack-recovery/#multiple-bot-instances","title":"Multiple Bot Instances","text":"<p>Sometimes multiple instances can run simultaneously.</p> <p>Solution: <pre><code># Kill ALL slack-related Python processes\npkill -9 -f \"python.*slack\"\n\n# Clear PID file\nrm -f /srv/pai/slack_v2.pid\n\n# Start fresh\ncd /srv/pai &amp;&amp; ./start_slack_bot.sh\n</code></pre></p>"},{"location":"operations/slack-recovery/#prevention","title":"Prevention","text":""},{"location":"operations/slack-recovery/#add-to-monitoring","title":"Add to Monitoring","text":"<p>Ensure heartbeat checks for Slack bot: <pre><code># Add to heartbeat monitoring\ngrep -q \"slack_bot\" /srv/pai/intelligence_stack/collectors/heartbeat_collector.py\n</code></pre></p>"},{"location":"operations/slack-recovery/#regular-health-checks","title":"Regular Health Checks","text":"<p>Check bot health during daily system check: <pre><code>ps -p $(cat /srv/pai/slack_v2.pid) &gt;/dev/null &amp;&amp; echo \"\u2713 Bot running\" || echo \"\u2717 Bot down\"\n</code></pre></p>"},{"location":"operations/slack-recovery/#log-rotation","title":"Log Rotation","text":"<p>Prevent log files from growing too large: <pre><code># Check log size\nls -lh /srv/pai/logs/slack_bot.log\n\n# Rotate if &gt; 100MB\nif [ $(stat -c%s /srv/pai/logs/slack_bot.log) -gt 104857600 ]; then\n    mv /srv/pai/logs/slack_bot.log /srv/pai/logs/slack_bot.log.old\n    touch /srv/pai/logs/slack_bot.log\nfi\n</code></pre></p>"},{"location":"operations/slack-recovery/#escalation","title":"Escalation","text":"<p>If bot repeatedly fails: 1. Check for recent code changes in git 2. Review full error traceback in logs 3. Test individual components:    - Webhook connectivity    - Python environment    - Async event loop health 4. Consider reverting to last known good version</p>"},{"location":"operations/slack-recovery/#success-criteria","title":"Success Criteria","text":"<ul> <li> Bot process running (check PID)</li> <li> No errors in last 50 log lines</li> <li> Test message appears in #pai-verbose</li> <li> Bot responds to monitoring events</li> </ul>"},{"location":"operations/slack-recovery/#related-documentation","title":"Related Documentation","text":"<ul> <li><code>incident-response.md</code> - General incident handling</li> <li><code>monitoring-alerts.md</code> - Understanding bot alerts</li> <li><code>common-issues.md</code> - Other common problems</li> </ul>"},{"location":"operations/ssl-troubleshooting/","title":"Troubleshooting: SSL and Subdomain Access","text":"<p>This guide covers the diagnosis and resolution of issues related to SSL certificates and subdomain accessibility.</p>"},{"location":"operations/ssl-troubleshooting/#1-problem-synopsis","title":"1. Problem Synopsis","text":"<ul> <li>Symptom: New subdomains (e.g., <code>pb.kaut.to</code>) are inaccessible from the internet, while the main domain (<code>kaut.to</code>) works correctly.</li> <li>Symptom: Let's Encrypt certificate generation or expansion fails with a timeout error for new subdomains.</li> </ul>"},{"location":"operations/ssl-troubleshooting/#2-root-cause","title":"2. Root Cause","text":"<p>The issue stems from a Split DNS configuration combined with a Proxy/Firewall.</p> <ul> <li>Main Domain (<code>kaut.to</code>): Points to a proxy/tunnel service IP (e.g., <code>157.180.28.186</code>).</li> <li>Subdomains (<code>pb.kaut.to</code>): Were incorrectly pointing directly to the origin server's IP (e.g., <code>172.87.176.11</code>).</li> <li>The Block: The origin server is firewalled and only accepts traffic from the proxy service. Direct connections from the internet are blocked.</li> </ul> <p>This configuration prevents Let's Encrypt from validating the subdomains and blocks all external user traffic.</p>"},{"location":"operations/ssl-troubleshooting/#3-resolution-steps","title":"3. Resolution Steps","text":"<p>The problem was resolved by unifying the DNS and proxy configuration.</p> <ol> <li>Update DNS Records: All subdomain A records were updated to point to the same proxy IP address as the main domain (<code>157.180.28.186</code>).</li> <li>Configure Proxy Service: The proxy service (e.g., Cloudflare, Hetzner Firewall) was configured to recognize and forward traffic for the new subdomains.</li> <li>Expand SSL Certificate: With traffic flowing correctly through the proxy, the Let's Encrypt certificate was successfully expanded to cover all required subdomains.</li> <li>Activate Nginx Configs: The Nginx server blocks for the subdomains were enabled and tested.</li> </ol>"},{"location":"operations/ssl-troubleshooting/#4-key-diagnostic-commands","title":"4. Key Diagnostic Commands","text":"<p>Use these commands to diagnose similar issues:</p> <ul> <li> <p>Check DNS Resolution: <pre><code>dig pb.kaut.to\n</code></pre> (Verify that the IP address matches the main domain's proxy IP).</p> </li> <li> <p>Verify SSL Certificate: <pre><code>openssl s_client -connect pb.kaut.to:443 -servername pb.kaut.to | openssl x509 -noout -text\n</code></pre> (Check the \"Subject Alternative Name\" section to ensure all required domains are listed).</p> </li> <li> <p>Trace Network Path: <pre><code>traceroute pb.kaut.to\n</code></pre> (Identify where connections are being dropped).</p> </li> </ul>"},{"location":"operations/ssl-troubleshooting/#5-lessons-learned-best-practices","title":"5. Lessons Learned &amp; Best Practices","text":"<ul> <li>Verify IPs: Always confirm that main domains and subdomains resolve to the correct IP address, especially when a proxy is involved.</li> <li>Document Proxies: Maintain clear documentation of all proxy, CDN, or tunnel services in use.</li> <li>Prefer Path-Based Routing: When possible, using paths (<code>kaut.to/pb/</code>) instead of subdomains (<code>pb.kaut.to</code>) can simplify network configuration and avoid these issues.</li> <li>Check <code>certbot</code>: Before expanding certificates, run <code>sudo certbot certificates</code> to see what domains are currently covered.</li> </ul>"},{"location":"operations/token-optimization/","title":"Token Optimization Implementation Guide","text":"<p>Date: 2025-07-05</p>"},{"location":"operations/token-optimization/#overview","title":"Overview","text":"<p>This guide documents the token optimization changes made to the PAI/DAI monitoring system, reducing Claude API usage by 66% while maintaining functionality.</p>"},{"location":"operations/token-optimization/#changes-implemented","title":"Changes Implemented","text":""},{"location":"operations/token-optimization/#1-prompt-optimization","title":"1. Prompt Optimization \u2705","text":"<p>Updated prompts to request concise responses for non-critical issues:</p> <p>Files Modified: - <code>/srv/pai/intelligence_stack/processors/heartbeat_intelligent.sh</code> - <code>/srv/pai/monitoring/task_monitor.py</code></p> <p>Key Changes: - Added \"Be concise\" instructions - Limited responses to 1-2 lines for minor issues - Focus on critical issues only</p>"},{"location":"operations/token-optimization/#2-google-tasks-verification","title":"2. Google Tasks Verification \u2705","text":"<p>Status: Working correctly - Service account authentication functional - Using Google Tasks API (not Gist storage) - 1 task list available: \"My Tasks\"</p>"},{"location":"operations/token-optimization/#3-batch-operations-implementation","title":"3. Batch Operations Implementation \u2705","text":"<p>New File: <code>/srv/pai/monitoring/batch_monitor.py</code></p> <p>Combines email and task monitoring into single Claude calls: - Collects both email and task data - Single Claude analysis for both - Smart routing to appropriate Slack channels</p> <p>Benefits: - Reduces API calls from 112 to 37 per day - More context-aware decisions - Simplified monitoring architecture</p>"},{"location":"operations/token-optimization/#4-optimized-cron-schedule","title":"4. Optimized Cron Schedule \u2705","text":"<p>Previous Schedule: 149 Claude calls/day - Email monitoring: 88 runs - Task monitoring: 24 runs - Unified monitoring: 12 runs - Heartbeat: 24 runs - Morning brief: 1 run</p> <p>New Schedule: 50 Claude calls/day - Batch monitor: 37 runs (focused on business hours) - Heartbeat: 12 runs (every 2 hours) - Morning brief: 1 run</p> <p>Business Hours Focus: - 8 AM - 6 PM: Every 20 minutes - 6 PM - 10 PM: Hourly - Overnight: Only at midnight and 6 AM</p>"},{"location":"operations/token-optimization/#implementation-steps","title":"Implementation Steps","text":""},{"location":"operations/token-optimization/#step-1-apply-prompt-updates","title":"Step 1: Apply Prompt Updates","text":"<p>Already completed - prompts now request concise responses.</p>"},{"location":"operations/token-optimization/#step-2-deploy-batch-monitor","title":"Step 2: Deploy Batch Monitor","text":"<pre><code># Already created and made executable\n/srv/pai/monitoring/batch_monitor.py\n</code></pre>"},{"location":"operations/token-optimization/#step-3-update-crontab","title":"Step 3: Update Crontab","text":"<pre><code># Run the update script\n/srv/pai/monitoring/update_crontab.sh\n\n# Or manually apply from:\n/srv/pai/monitoring/crontab_optimized.txt\n</code></pre>"},{"location":"operations/token-optimization/#step-4-fix-gmail-authentication","title":"Step 4: Fix Gmail Authentication","text":"<pre><code># This is still needed to restore email monitoring\npython3 /srv/pai/toolkit/gmail_tool.py auth\n</code></pre>"},{"location":"operations/token-optimization/#token-usage-projections","title":"Token Usage Projections","text":""},{"location":"operations/token-optimization/#before-optimization","title":"Before Optimization","text":"<ul> <li>Daily: 43,000 tokens</li> <li>Monthly: 1.3M tokens</li> <li>Cost: $6.85/month</li> </ul>"},{"location":"operations/token-optimization/#after-optimization","title":"After Optimization","text":"<ul> <li>Daily: ~15,000 tokens (65% reduction)</li> <li>Monthly: 450,000 tokens</li> <li>Cost: ~$2.40/month</li> </ul>"},{"location":"operations/token-optimization/#monitoring-the-changes","title":"Monitoring the Changes","text":""},{"location":"operations/token-optimization/#log-files-to-watch","title":"Log Files to Watch","text":"<pre><code># New batch monitor log\ntail -f /srv/pai/monitoring/logs/batch.log\n\n# Heartbeat (reduced frequency)\ntail -f /srv/pai/monitoring/logs/heartbeat.log\n\n# Check for any issues\ngrep ERROR /srv/pai/monitoring/logs/*.log\n</code></pre>"},{"location":"operations/token-optimization/#success-metrics","title":"Success Metrics","text":"<ul> <li> Token usage reduced by &gt;60%</li> <li> No missed urgent items</li> <li> Slack channels receive appropriate messages</li> <li> Response times remain under 30 seconds</li> </ul>"},{"location":"operations/token-optimization/#troubleshooting","title":"Troubleshooting","text":""},{"location":"operations/token-optimization/#if-batch-monitor-fails","title":"If Batch Monitor Fails","text":"<pre><code># Test directly\npython3 /srv/pai/monitoring/batch_monitor.py\n\n# Check imports\npython3 -c \"from multi_account_email_collector import collect_all_emails\"\npython3 -c \"from tasks_fast import list_tasks_fast\"\n</code></pre>"},{"location":"operations/token-optimization/#if-messages-not-routing-correctly","title":"If Messages Not Routing Correctly","text":"<ol> <li>Check Slack webhook configuration</li> <li>Verify channel mappings in batch_monitor.py</li> <li>Test Slack sender directly</li> </ol>"},{"location":"operations/token-optimization/#rollback-plan","title":"Rollback Plan","text":"<pre><code># Restore original crontab from backup\ncrontab /srv/pai/monitoring/crontab_backup_[timestamp].txt\n</code></pre>"},{"location":"operations/token-optimization/#next-steps","title":"Next Steps","text":"<ol> <li>Critical: Fix Gmail authentication to restore email monitoring</li> <li>Monitor: Watch logs for first 24 hours after implementation</li> <li>Tune: Adjust batch monitor timing based on usage patterns</li> <li>Enhance: Consider adding more intelligence to batch decisions</li> </ol>"},{"location":"operations/token-optimization/#long-term-improvements","title":"Long-term Improvements","text":"<ol> <li>Knowledge Graph: Store patterns to avoid repeated analysis</li> <li>Smart Triggers: Only analyze when data changes significantly</li> <li>Model Selection: Use Claude Haiku for simple routing</li> <li>Caching: Cache routing decisions for similar patterns</li> </ol> <p>The optimization maintains all functionality while significantly reducing costs and API usage.</p>"},{"location":"operations/troubleshooting/","title":"Common Issues and Solutions","text":"<p>This document covers frequently encountered problems in the DAI/PAI system and their solutions.</p>"},{"location":"operations/troubleshooting/#claude-cli-issues","title":"Claude CLI Issues","text":""},{"location":"operations/troubleshooting/#prompt-too-long-error","title":"\"Prompt too long\" Error","text":"<p>Symptom: Scripts fail with \"prompt too long\" error from Claude.</p> <p>Cause: Using <code>-c</code> flag causes context accumulation over multiple runs.</p> <p>Solution: <pre><code># Remove -c flag from Claude invocations\n# Bad:  claude -p -c\n# Good: claude -p\n\n# Fixed in:\n# - /srv/pai/monitoring/email_monitor.py\n# - /srv/pai/intelligence_stack/processors/heartbeat_intelligent.sh\n</code></pre></p>"},{"location":"operations/troubleshooting/#claude-session-not-found","title":"Claude Session Not Found","text":"<p>Symptom: \"Session not found\" errors.</p> <p>Solution: <pre><code># List all sessions\nclaude list\n\n# Create new session if needed\nclaude new\n\n# Use specific session\nclaude -r SESSION_ID\n</code></pre></p>"},{"location":"operations/troubleshooting/#authentication-issues","title":"Authentication Issues","text":""},{"location":"operations/troubleshooting/#gmail-token-expired","title":"Gmail Token Expired","text":"<p>Symptom: Email monitoring fails with authentication errors.</p> <p>Solution: <pre><code># Refresh token\npython3 /srv/pai/toolkit/gmail_tool.py auth\n\n# Follow OAuth flow if completely expired\n# Token saved to: /srv/tokens/gmail_token.json\n</code></pre></p>"},{"location":"operations/troubleshooting/#calendar-access-denied","title":"Calendar Access Denied","text":"<p>Symptom: Calendar collector fails with permission errors.</p> <p>Cause: Service account permissions changed.</p> <p>Solution: 1. Verify service account email: <code>pai-assistant@personal-ai-453416.iam.gserviceaccount.com</code> 2. Re-share calendars with service account 3. Test access: <code>python3 /srv/pai/intelligence_stack/collectors/calendar_collector.py</code></p>"},{"location":"operations/troubleshooting/#slack-integration-issues","title":"Slack Integration Issues","text":""},{"location":"operations/troubleshooting/#messages-not-appearing","title":"Messages Not Appearing","text":"<p>Symptom: System says messages sent but nothing in Slack.</p> <p>Checklist: <pre><code># 1. Test webhook\ncurl -X POST -H 'Content-type: application/json' \\\n  --data '{\"text\":\"Test\"}' \\\n  $(grep SLACK_WEBHOOK_PAI /srv/.env | cut -d'=' -f2)\n\n# 2. Check channel mappings\ngrep SLACK_WEBHOOK /srv/.env\n\n# 3. Verify Slack user ID\ngrep \"@\" /srv/pai/monitoring/email_monitor.py\n# Should be: &lt;@UGQR4AJNS&gt;\n</code></pre></p>"},{"location":"operations/troubleshooting/#wrong-channel-routing","title":"Wrong Channel Routing","text":"<p>Symptom: Messages going to wrong Slack channel.</p> <p>Solution: Review routing logic in: - <code>/srv/pai/monitoring/email_monitor.py</code> - <code>/srv/pai/toolkit/slack_sender_multichannel.py</code></p> <p>Channel mapping: - Urgent + @mention \u2192 #pai - Important \u2192 #pai-notifications - Everything \u2192 #pai-verbose</p>"},{"location":"operations/troubleshooting/#python-import-errors","title":"Python Import Errors","text":""},{"location":"operations/troubleshooting/#module-not-found","title":"Module Not Found","text":"<p>Symptom: <code>ModuleNotFoundError</code> in logs.</p> <p>Common fixes: <pre><code># Missing argparse (fixed in calendar_collector.py)\nimport argparse\n\n# Path issues\nsys.path.insert(0, '/srv/pai/apps')\n\n# Wrong import path\n# Bad:  from utils.google_auth import\n# Good: from pai_toolkit.auth import\n</code></pre></p>"},{"location":"operations/troubleshooting/#cron-job-issues","title":"Cron Job Issues","text":""},{"location":"operations/troubleshooting/#cron-not-running","title":"Cron Not Running","text":"<p>Symptom: Expected tasks not executing.</p> <p>Debug steps: <pre><code># 1. Check cron service\nsystemctl status cron\n\n# 2. Check user crontab\ncrontab -l\n\n# 3. Check cron logs\ngrep CRON /var/log/syslog | tail -20\n\n# 4. Test script manually\n/srv/pai/intelligence_stack/processors/morning_brief.sh\n</code></pre></p>"},{"location":"operations/troubleshooting/#cron-running-but-failing","title":"Cron Running But Failing","text":"<p>Common causes: 1. No PATH in cron environment 2. Relative paths in scripts 3. Missing environment variables</p> <p>Solution: Always use absolute paths and export required vars: <pre><code>#!/bin/bash\nexport PATH=/home/joni/.npm-global/bin:$PATH\ncd /srv/pai/intelligence_stack\n</code></pre></p>"},{"location":"operations/troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"operations/troubleshooting/#slow-email-monitoring","title":"Slow Email Monitoring","text":"<p>Symptom: Email checks taking &gt; 30 seconds.</p> <p>Solutions: 1. Check cache: <code>ls -la /tmp/pai_*_cache.json</code> 2. Clear stale cache: <code>rm -f /tmp/pai_*_cache.json</code> 3. Reduce accounts checked if needed</p>"},{"location":"operations/troubleshooting/#high-memory-usage","title":"High Memory Usage","text":"<p>Symptom: Python processes using &gt; 500MB RAM.</p> <p>Check: <pre><code>ps aux | grep python | sort -k4 -rn | head -5\n</code></pre></p> <p>Solutions: 1. Restart long-running processes 2. Check for memory leaks in logs 3. Implement process recycling in cron</p>"},{"location":"operations/troubleshooting/#disk-space-issues","title":"Disk Space Issues","text":""},{"location":"operations/troubleshooting/#logs-growing-too-large","title":"Logs Growing Too Large","text":"<p>Symptom: Disk space warnings.</p> <p>Quick fix: <pre><code># Find large logs\nfind /srv/pai -name \"*.log\" -size +100M\n\n# Rotate large logs\ncd /srv/pai/monitoring/logs\nfor log in *.log; do\n  if [ $(stat -c%s \"$log\") -gt 104857600 ]; then\n    mv \"$log\" \"${log}.old\"\n    touch \"$log\"\n  fi\ndone\n</code></pre></p> <p>Long-term: Ensure log rotation is working: <pre><code># Should run nightly\n/srv/pai/intelligence_stack/utils/rotate_logs.sh\n</code></pre></p>"},{"location":"operations/troubleshooting/#quick-diagnostic-commands","title":"Quick Diagnostic Commands","text":"<pre><code># Overall health\npython3 /srv/pai/monitoring/update_system_status.py\n\n# Check all processes\nps aux | grep -E \"(pai|slack|claude)\" | grep -v grep\n\n# Recent errors (last hour)\nfind /srv/pai -name \"*.log\" -mmin -60 -exec grep -l ERROR {} \\;\n\n# Test core functionality\necho \"System test at $(date)\" | \\\n  python3 /srv/pai/toolkit/slack_sender_multichannel.py --channel verbose\n\n# Check disk/memory\ndf -h /srv &amp;&amp; free -h\n</code></pre>"},{"location":"operations/troubleshooting/#when-all-else-fails","title":"When All Else Fails","text":"<ol> <li>Check recent commits: <code>cd /srv &amp;&amp; git log --oneline -10</code></li> <li>Review recent worklogs: <code>ls -la /srv/worklogs/dai_*.md | tail -5</code></li> <li>Look for pattern in errors: <code>grep -r \"ERROR\\|CRITICAL\" /srv/pai/*/logs/*.log | tail -50</code></li> <li>Restart minimal services and add one at a time</li> <li>Post in #pai channel for help</li> </ol>"},{"location":"operations/troubleshooting/#prevention","title":"Prevention","text":"<ol> <li>Monitor regularly: Run health checks daily</li> <li>Update CAG: Document new issues and solutions</li> <li>Test changes: Always test scripts manually before cron</li> <li>Review logs: Check logs weekly for warnings</li> <li>Clean up: Remove old logs, cache files monthly</li> </ol>"},{"location":"specs/active/","title":"Active Specifications","text":"<p>Current technical specifications and implementation plans.</p>"},{"location":"specs/active/#documentation-system","title":"Documentation System","text":"<ul> <li>MkDocs Migration Plan - IMPLEMENTED</li> <li>Documentation Consolidation</li> <li>Documentation Optimization Guide</li> </ul>"},{"location":"specs/active/#applications","title":"Applications","text":"<ul> <li>Kaut Pastebin v1.0 - ACTIVE</li> <li>PAI Web Dashboard - ACTIVE</li> <li>Task v2.0 - IN PROGRESS</li> <li>Browser Testing Toolkit</li> </ul>"},{"location":"specs/active/#infrastructure","title":"Infrastructure","text":"<ul> <li>Apps Repository Structure - ACTIVE</li> <li>Universal Setup Script</li> <li>MCP Server</li> <li>AI Self-Documenting Apps</li> </ul>"},{"location":"specs/active/#jtools-ecosystem","title":"jtools Ecosystem","text":"<ul> <li>jtools API Architecture</li> <li>jtools Repository Reorganization</li> <li>jtools Unified Structure</li> </ul>"},{"location":"specs/active/#context-knowledge","title":"Context &amp; Knowledge","text":"<ul> <li>Context Library v0.1 - IMPLEMENTED</li> <li>Context Optimization Research</li> <li>Specialized Agents</li> </ul>"},{"location":"specs/active/#status-key","title":"Status Key","text":"<ul> <li>ACTIVE - Currently deployed and in use</li> <li>IMPLEMENTED - Completed and integrated</li> <li>IN PROGRESS - Under active development</li> <li>PLANNED - Approved but not started</li> <li>DRAFT - Under consideration</li> </ul>"},{"location":"specs/active/#quick-links","title":"Quick Links","text":"<ul> <li>Implementation Guides</li> <li>Archived Specs</li> <li>GitHub Issues</li> </ul> <p>Contributing</p> <p>New specifications should follow the template in <code>/srv/specs/README.md</code></p>"},{"location":"specs/archives/","title":"Specification Archives","text":"<p>Historical specifications preserved for reference.</p>"},{"location":"specs/archives/#archive-organization","title":"Archive Organization","text":"<p>Specifications are archived when: - Implementation is complete and stable - Specification is superseded by newer version - Project is cancelled or indefinitely postponed - Technology becomes obsolete</p>"},{"location":"specs/archives/#2025-archives","title":"2025 Archives","text":""},{"location":"specs/archives/#q1-2025","title":"Q1 2025","text":"<ul> <li>PAI Claude Brain Architecture - Superseded by current PAI architecture</li> <li>PAI Monitoring Architecture - Integrated into operations docs</li> <li>PAI Toolkit MVP - Evolved into current toolkit</li> <li>Personal AI Toolkit v0.1 - Foundation for current implementation</li> </ul>"},{"location":"specs/archives/#completed-implementations","title":"Completed Implementations","text":"<ul> <li>Context Library v0.1 - Successfully implemented</li> <li>MkDocs Migration - Completed and deployed</li> <li>Apps Repository Structure - Implemented as designed</li> </ul>"},{"location":"specs/archives/#2024-archives","title":"2024 Archives","text":""},{"location":"specs/archives/#jtools-evolution","title":"jtools Evolution","text":"<p>Early specifications for jtools that laid groundwork for current system: - Initial toolkit design - API architecture drafts - Repository organization plans</p>"},{"location":"specs/archives/#infrastructure-planning","title":"Infrastructure Planning","text":"<p>Original infrastructure specifications that evolved into current architecture: - Server setup guides - Service deployment plans - Security frameworks</p>"},{"location":"specs/archives/#accessing-archives","title":"Accessing Archives","text":""},{"location":"specs/archives/#file-locations","title":"File Locations","text":"<pre><code>/srv/specs/archive/           # Original archive location\n/srv/apps/docs/docs/specs/archives/  # New archive location\n</code></pre>"},{"location":"specs/archives/#searching-archives","title":"Searching Archives","text":"<pre><code># Search for specific topic\ngrep -r \"topic\" /srv/specs/archive/\n\n# List all archived specs\nfind /srv/specs/archive -name \"*.md\" -type f\n</code></pre>"},{"location":"specs/archives/#learning-from-archives","title":"Learning from Archives","text":""},{"location":"specs/archives/#why-review-archives","title":"Why Review Archives?","text":"<ol> <li>Historical Context - Understand evolution of systems</li> <li>Design Decisions - Learn why certain choices were made</li> <li>Avoid Repetition - Don't repeat past mistakes</li> <li>Reusable Components - Find code/ideas to repurpose</li> </ol>"},{"location":"specs/archives/#common-patterns-in-archives","title":"Common Patterns in Archives","text":"<ul> <li>Over-engineering in early versions</li> <li>Simplified approaches winning</li> <li>Security added retroactively</li> <li>Documentation improving over time</li> </ul>"},{"location":"specs/archives/#notable-archived-specs","title":"Notable Archived Specs","text":""},{"location":"specs/archives/#xwander-project","title":"XWander Project","text":"<p>Location: <code>/srv/specs/xwander/</code> - Business monitoring integration - Slack customer service bot - SDK integration analysis - Valuable patterns for future business integrations</p>"},{"location":"specs/archives/#early-pai-designs","title":"Early PAI Designs","text":"<ul> <li>Original brain architecture</li> <li>First monitoring approaches</li> <li>Toolkit evolution</li> <li>Lessons learned documented</li> </ul>"},{"location":"specs/archives/#archive-policy","title":"Archive Policy","text":""},{"location":"specs/archives/#what-to-archive","title":"What to Archive","text":"<ul> <li>Completed specifications</li> <li>Cancelled projects (with notes)</li> <li>Superseded versions</li> <li>Historical documentation</li> </ul>"},{"location":"specs/archives/#what-not-to-archive","title":"What NOT to Archive","text":"<ul> <li>Active specifications</li> <li>Reference documentation</li> <li>Implementation guides</li> <li>Current best practices</li> </ul>"},{"location":"specs/archives/#archive-process","title":"Archive Process","text":"<ol> <li>Mark specification as archived</li> <li>Add completion/cancellation notes</li> <li>Move to archive directory</li> <li>Update index</li> <li>Link from new specs if relevant</li> </ol>"},{"location":"specs/archives/#using-archived-content","title":"Using Archived Content","text":""},{"location":"specs/archives/#when-to-reference-archives","title":"When to Reference Archives","text":"<ul> <li>Starting similar project</li> <li>Debugging legacy code</li> <li>Understanding system history</li> <li>Finding reusable components</li> </ul>"},{"location":"specs/archives/#caution-when-using-archives","title":"Caution When Using Archives","text":"<ul> <li>Check dates - may be outdated</li> <li>Verify dependencies still exist</li> <li>Update security practices</li> <li>Modernize code patterns</li> </ul>"},{"location":"specs/archives/#quick-reference","title":"Quick Reference","text":"Year Quarter Notable Archives 2025 Q1 PAI Brain, Monitoring, Toolkit MVP 2024 Q4 Infrastructure plans, jtools v0.1 2024 Q3 Initial system designs <p>Important</p> <p>Archived specifications may contain outdated practices or deprecated dependencies. Always review and update before reusing.</p>"},{"location":"specs/browser-testing-toolkit/","title":"Browser Testing Toolkit Specification v0.1","text":""},{"location":"specs/browser-testing-toolkit/#overview","title":"Overview","text":"<p>A real-time browser testing toolkit that allows DAI to perform UI testing with live visual feedback at test.kaut.to.</p>"},{"location":"specs/browser-testing-toolkit/#architecture","title":"Architecture","text":""},{"location":"specs/browser-testing-toolkit/#components","title":"Components","text":"<ol> <li>Selenium Grid Hub - Central test coordinator</li> <li>Chrome/Firefox Nodes - Browser instances with VNC</li> <li>noVNC Web Client - Browser-based VNC viewer</li> <li>Playwright/Selenium Scripts - Test automation</li> <li>Test Dashboard - Live test status and controls</li> </ol>"},{"location":"specs/browser-testing-toolkit/#stack-decision","title":"Stack Decision","text":"<ul> <li>Primary: Docker Selenium Grid with VNC-enabled nodes</li> <li>Automation: Playwright (modern, faster) with Selenium fallback</li> <li>Viewing: noVNC web client at test.kaut.to</li> <li>Recording: Built-in video recording for test artifacts</li> </ul>"},{"location":"specs/browser-testing-toolkit/#implementation-plan","title":"Implementation Plan","text":""},{"location":"specs/browser-testing-toolkit/#phase-1-infrastructure-setup","title":"Phase 1: Infrastructure Setup","text":"<pre><code># docker-compose.yml for test environment\nversion: '3'\nservices:\n  selenium-hub:\n    image: selenium/hub:4.15.0\n    container_name: selenium-hub\n    ports:\n      - \"4444:4444\"\n\n  chrome:\n    image: selenium/node-chrome:4.15.0\n    shm_size: 2gb\n    depends_on:\n      - selenium-hub\n    environment:\n      - SE_EVENT_BUS_HOST=selenium-hub\n      - SE_EVENT_BUS_PUBLISH_PORT=4442\n      - SE_EVENT_BUS_SUBSCRIBE_PORT=4443\n      - SE_NODE_MAX_SESSIONS=1\n      - SE_VNC_NO_PASSWORD=1\n    ports:\n      - \"7900:7900\"  # noVNC web interface\n      - \"5900:5900\"  # VNC server\n</code></pre>"},{"location":"specs/browser-testing-toolkit/#phase-2-web-interface","title":"Phase 2: Web Interface","text":"<ul> <li>test.kaut.to - Main testing dashboard</li> <li>Features:</li> <li>Live browser view via noVNC</li> <li>Test execution controls</li> <li>Screenshot/video capture</li> <li>Test history and artifacts</li> </ul>"},{"location":"specs/browser-testing-toolkit/#phase-3-toolkit-integration","title":"Phase 3: Toolkit Integration","text":"<pre><code># /srv/toolkit/browser_test.py\nclass BrowserTest:\n    def __init__(self):\n        self.hub_url = \"http://localhost:4444/wd/hub\"\n        self.vnc_url = \"http://test.kaut.to:7900\"\n\n    def test_pastebin_upload(self):\n        \"\"\"Test image upload functionality\"\"\"\n        driver = self.get_driver()\n        driver.get(\"https://pb.kaut.to\")\n        # ... test implementation\n\n    def get_live_view_url(self):\n        \"\"\"Return URL for live viewing\"\"\"\n        return f\"{self.vnc_url}/?autoconnect=1&amp;resize=scale\"\n</code></pre>"},{"location":"specs/browser-testing-toolkit/#user-experience","title":"User Experience","text":""},{"location":"specs/browser-testing-toolkit/#for-dai-developer","title":"For DAI (Developer)","text":"<ol> <li>Run test command: <code>python3 browser_test.py test_pastebin_upload</code></li> <li>Script outputs: \"View test live at: https://test.kaut.to\"</li> <li>Execute UI actions programmatically</li> <li>See real-time browser activity</li> </ol>"},{"location":"specs/browser-testing-toolkit/#for-joni-observer","title":"For Joni (Observer)","text":"<ol> <li>Visit https://test.kaut.to</li> <li>See live browser view with DAI's actions</li> <li>Watch tests execute in real-time</li> <li>Review recorded videos afterward</li> </ol>"},{"location":"specs/browser-testing-toolkit/#key-features","title":"Key Features","text":""},{"location":"specs/browser-testing-toolkit/#1-real-time-viewing","title":"1. Real-Time Viewing","text":"<ul> <li>noVNC provides browser-based VNC access</li> <li>No client software needed</li> <li>Works on any device with a browser</li> </ul>"},{"location":"specs/browser-testing-toolkit/#2-test-recording","title":"2. Test Recording","text":"<ul> <li>Automatic video recording of all tests</li> <li>Screenshots at key points</li> <li>Full test artifacts stored</li> </ul>"},{"location":"specs/browser-testing-toolkit/#3-multi-browser-support","title":"3. Multi-Browser Support","text":"<ul> <li>Chrome (primary)</li> <li>Firefox</li> <li>Edge (future)</li> <li>Safari (via WebKit)</li> </ul>"},{"location":"specs/browser-testing-toolkit/#4-debugging-tools","title":"4. Debugging Tools","text":"<ul> <li>Pause/resume test execution</li> <li>Interactive browser console</li> <li>Network traffic inspection</li> <li>DOM element highlighting</li> </ul>"},{"location":"specs/browser-testing-toolkit/#security-considerations","title":"Security Considerations","text":"<ul> <li>test.kaut.to requires authentication</li> <li>VNC sessions are temporary</li> <li>No sensitive data in test environment</li> <li>Isolated Docker network</li> </ul>"},{"location":"specs/browser-testing-toolkit/#future-enhancements","title":"Future Enhancements","text":"<ol> <li>AI-Powered Testing: Use Claude to analyze screenshots</li> <li>Visual Regression: Automatic screenshot comparison</li> <li>Parallel Testing: Multiple browser instances</li> <li>Mobile Testing: Android/iOS emulation</li> <li>Performance Metrics: Page load times, resource usage</li> </ol>"},{"location":"specs/browser-testing-toolkit/#quick-start-commands","title":"Quick Start Commands","text":"<pre><code># Start test environment\ndocker-compose up -d\n\n# Run a test with live view\npython3 /srv/toolkit/browser_test.py --live\n\n# View test at\nhttps://test.kaut.to\n\n# Stop environment\ndocker-compose down\n</code></pre>"},{"location":"specs/browser-testing-toolkit/#benefits","title":"Benefits","text":"<ol> <li>Transparency: Joni can see exactly what DAI is testing</li> <li>Debugging: Visual feedback for troubleshooting</li> <li>Confidence: Verify UI changes work correctly</li> <li>Documentation: Video records of all tests</li> <li>Collaboration: Share test sessions via URL</li> </ol>"},{"location":"specs/documentation-consolidation/","title":"Documentation Consolidation v0.1 Plan","text":"<p>Version: 0.1 Date: 2025-07-17 Author: DAI</p>"},{"location":"specs/documentation-consolidation/#executive-summary","title":"Executive Summary","text":"<p>Based on analysis of the current documentation structure (253+ files across multiple directories) and research on documentation systems, I recommend adopting MkDocs with Material theme as the core documentation platform, enhanced with AI-friendly features and maintaining the existing CAG system for AI context management.</p>"},{"location":"specs/documentation-consolidation/#current-state-analysis","title":"Current State Analysis","text":""},{"location":"specs/documentation-consolidation/#what-we-have","title":"What We Have","text":"<ul> <li>253+ documentation files across /srv/docs, /srv/specs, /srv/context, /srv/CAG</li> <li>Well-organized by purpose (specs, guides, operations, context)</li> <li>Multiple index files but no unified search</li> <li>Web-accessible via https://kaut.to/docs</li> <li>AI-optimized CAG system for Claude</li> </ul>"},{"location":"specs/documentation-consolidation/#pain-points","title":"Pain Points","text":"<ol> <li>No unified search across all documentation</li> <li>Some duplication between directories</li> <li>No programmatic way for AI to add/update docs</li> <li>Multiple index files to maintain</li> <li>No versioning or change tracking UI</li> </ol>"},{"location":"specs/documentation-consolidation/#documentation-system-comparison","title":"Documentation System Comparison","text":""},{"location":"specs/documentation-consolidation/#options-evaluated","title":"Options Evaluated","text":"System Pros Cons AI-Friendly Verdict Wiki.js Full-featured, Node.js based Too heavy, requires database Moderate \u274c Too complex MoinMoin Python-based, mature Dated UI, complex setup Poor \u274c Not modern enough Sphinx Powerful, API docs Complex, Python-focused Good \u274c Overkill for our needs MkDocs Simple, fast, markdown Basic features Excellent \u2705 Recommended Docsify No build step, simple No static generation Good \ud83e\udd14 Alternative option"},{"location":"specs/documentation-consolidation/#why-mkdocs","title":"Why MkDocs?","text":"<ol> <li>Simple: Just markdown files + YAML config</li> <li>Fast: Static site generation</li> <li>Git-based: All content version controlled</li> <li>Extensible: Rich plugin ecosystem</li> <li>AI-friendly: Easy to read/write markdown files programmatically</li> <li>Material theme: Modern UI with search, navigation, dark mode</li> </ol>"},{"location":"specs/documentation-consolidation/#ai-friendly-requirements","title":"AI-Friendly Requirements","text":"<p>Based on research, AI agents need:</p> <ol> <li>Programmatic access to read/write files</li> <li>Simple markdown format for content</li> <li>Clear file structure for navigation</li> <li>Metadata support for categorization</li> <li>Search API for finding content</li> <li>Version control integration</li> </ol>"},{"location":"specs/documentation-consolidation/#proposed-architecture","title":"Proposed Architecture","text":"<pre><code>/srv/docs-unified/\n\u251c\u2500\u2500 mkdocs.yml           # MkDocs configuration\n\u251c\u2500\u2500 docs/                # All documentation\n\u2502   \u251c\u2500\u2500 index.md         # Home page\n\u2502   \u251c\u2500\u2500 architecture/    # System architecture\n\u2502   \u251c\u2500\u2500 guides/          # How-to guides\n\u2502   \u251c\u2500\u2500 operations/      # Operational procedures\n\u2502   \u251c\u2500\u2500 specs/           # Technical specifications\n\u2502   \u251c\u2500\u2500 context/         # Context library\n\u2502   \u2514\u2500\u2500 api/             # API documentation\n\u251c\u2500\u2500 custom_theme/        # Material theme customizations\n\u251c\u2500\u2500 plugins/             # Custom MkDocs plugins\n\u2502   \u2514\u2500\u2500 ai_writer.py     # AI documentation helper\n\u2514\u2500\u2500 scripts/\n    \u251c\u2500\u2500 build.sh         # Build documentation\n    \u251c\u2500\u2500 deploy.sh        # Deploy to kaut.to\n    \u2514\u2500\u2500 ai_update.py     # AI update interface\n</code></pre>"},{"location":"specs/documentation-consolidation/#implementation-plan","title":"Implementation Plan","text":""},{"location":"specs/documentation-consolidation/#phase-1-setup-week-1","title":"Phase 1: Setup (Week 1)","text":"<ol> <li>Install MkDocs + Material theme</li> <li>Create basic mkdocs.yml configuration</li> <li>Set up directory structure</li> <li>Create initial navigation</li> </ol>"},{"location":"specs/documentation-consolidation/#phase-2-migration-week-2","title":"Phase 2: Migration (Week 2)","text":"<ol> <li>Migrate existing markdown files</li> <li>Update internal links</li> <li>Set up redirects from old URLs</li> <li>Test search functionality</li> </ol>"},{"location":"specs/documentation-consolidation/#phase-3-ai-integration-week-3","title":"Phase 3: AI Integration (Week 3)","text":"<ol> <li>Create AI writer plugin for MkDocs</li> <li>Implement llms.txt standard for AI discovery</li> <li>Add metadata to all pages</li> <li>Create AI update scripts</li> </ol>"},{"location":"specs/documentation-consolidation/#phase-4-enhancement-week-4","title":"Phase 4: Enhancement (Week 4)","text":"<ol> <li>Customize Material theme</li> <li>Add advanced search features</li> <li>Implement versioning</li> <li>Set up automated deployment</li> </ol>"},{"location":"specs/documentation-consolidation/#ai-integration-features","title":"AI Integration Features","text":""},{"location":"specs/documentation-consolidation/#1-ai-writer-plugin","title":"1. AI Writer Plugin","text":"<pre><code># plugins/ai_writer.py\nclass AIWriterPlugin:\n    \"\"\"MkDocs plugin for AI agents to write documentation\"\"\"\n\n    def write_page(self, path, content, metadata):\n        \"\"\"Write or update a documentation page\"\"\"\n        # Validate path\n        # Add metadata\n        # Write markdown file\n        # Update navigation\n        # Trigger rebuild\n</code></pre>"},{"location":"specs/documentation-consolidation/#2-llmstxt-implementation","title":"2. llms.txt Implementation","text":"<p>Create <code>/srv/docs-unified/llms.txt</code>: <pre><code># DAI/PAI Documentation System\n\n## API Access\n- Base URL: https://kaut.to/docs/api\n- Format: JSON/Markdown\n- Authentication: Bearer token\n\n## Key Sections\n- /architecture: System design documents\n- /guides: Step-by-step tutorials\n- /operations: Maintenance procedures\n- /context: Current system state\n</code></pre></p>"},{"location":"specs/documentation-consolidation/#3-metadata-standard","title":"3. Metadata Standard","text":"<p>All pages include frontmatter: <pre><code>---\ntitle: Page Title\ncategory: guide|spec|operation|context\ntags: [python, api, security]\nai_editable: true\nlast_updated_by: DAI|PAI|human\n---\n</code></pre></p>"},{"location":"specs/documentation-consolidation/#benefits","title":"Benefits","text":"<ol> <li>Unified Search: Single search box for all documentation</li> <li>Better Navigation: Automatic sidebar generation</li> <li>Version Control: Full Git integration</li> <li>AI-Friendly: Programmatic read/write access</li> <li>Modern UI: Responsive, dark mode, mobile-friendly</li> <li>Static Output: Fast loading, can be cached</li> <li>Easy Maintenance: Just edit markdown files</li> </ol>"},{"location":"specs/documentation-consolidation/#minimal-viable-product-mvp","title":"Minimal Viable Product (MVP)","text":"<p>For v0.1, focus on: 1. Basic MkDocs setup with Material theme 2. Migration of core documentation 3. Simple AI write script 4. Automated deployment to kaut.to</p>"},{"location":"specs/documentation-consolidation/#next-steps","title":"Next Steps","text":"<ol> <li>Approve plan: Review and approve this specification</li> <li>Create test instance: Set up MkDocs in /srv/docs-test</li> <li>Migrate sample docs: Move 10-20 key documents</li> <li>Test AI integration: Verify AI can read/write</li> <li>Plan full migration: Schedule complete transition</li> </ol>"},{"location":"specs/documentation-consolidation/#alternative-lightweight-option","title":"Alternative: Lightweight Option","text":"<p>If MkDocs feels too heavy, consider: - Docsify: No build step, renders markdown on-the-fly - Custom solution: Simple Python script + Jinja2 templates - Enhanced CAG: Extend existing CAG system with web UI</p>"},{"location":"specs/documentation-consolidation/#conclusion","title":"Conclusion","text":"<p>MkDocs with Material theme offers the best balance of simplicity, features, and AI-friendliness. It maintains our markdown-based approach while adding professional documentation features like search, navigation, and theming. The static output integrates well with our existing web infrastructure, and the programmatic access enables AI agents to contribute to documentation.</p>"},{"location":"specs/documentation-optimization/","title":"Documentation Optimization Guide","text":"<p>Version: 1.0 Date: 2025-07-17 Purpose: Guide for optimizing documentation during MkDocs migration</p>"},{"location":"specs/documentation-optimization/#optimization-principles","title":"Optimization Principles","text":""},{"location":"specs/documentation-optimization/#1-clarity-first","title":"1. Clarity First","text":"<ul> <li>Remove redundant information</li> <li>Simplify complex explanations</li> <li>Use consistent terminology</li> </ul>"},{"location":"specs/documentation-optimization/#2-ai-friendly-structure","title":"2. AI-Friendly Structure","text":"<ul> <li>Clear headings hierarchy</li> <li>Structured data where possible</li> <li>Machine-readable metadata</li> </ul>"},{"location":"specs/documentation-optimization/#3-user-focused","title":"3. User-Focused","text":"<ul> <li>Answer \"why\" before \"how\"</li> <li>Provide practical examples</li> <li>Include troubleshooting sections</li> </ul>"},{"location":"specs/documentation-optimization/#document-categories-actions","title":"Document Categories &amp; Actions","text":""},{"location":"specs/documentation-optimization/#keep-current-valuable","title":"\ud83d\udfe2 KEEP - Current &amp; Valuable","text":"<p>Criteria: - Updated within last 6 months - Actively referenced - Core functionality documentation</p> <p>Examples: - <code>/srv/CAG/*.md</code> - Core knowledge base - <code>/srv/docs/guides/authentication-guide.md</code> - <code>/srv/specs/*-v0.1.md</code> (recent specs)</p> <p>Actions: 1. Add frontmatter metadata 2. Update broken links 3. Standardize formatting 4. Add search keywords</p>"},{"location":"specs/documentation-optimization/#merge-related-content","title":"\ud83d\udfe1 MERGE - Related Content","text":"<p>Criteria: - Multiple docs covering same topic - Overlapping information - Can be consolidated</p> <p>Merge Targets: <pre><code>authentication-guide.md + google-oauth-guide.md \u2192 guides/authentication.md\ntroubleshooting-ssl.md + common-issues.md \u2192 operations/troubleshooting.md\nvarious-api-docs.md \u2192 api/reference.md\n</code></pre></p> <p>Actions: 1. Identify best content from each 2. Create unified structure 3. Remove duplication 4. Add cross-references</p>"},{"location":"specs/documentation-optimization/#archive-historical-value","title":"\ud83d\udfe0 ARCHIVE - Historical Value","text":"<p>Criteria: - Outdated but historically important - May be needed for reference - Contains lessons learned</p> <p>Examples: - Old implementation attempts - Deprecated API versions - Historical architecture decisions</p> <p>Actions: 1. Move to <code>docs/archive/</code> directory 2. Add deprecation notice 3. Link to current documentation 4. Keep searchable but de-emphasized</p>"},{"location":"specs/documentation-optimization/#delete-no-value","title":"\ud83d\udd34 DELETE - No Value","text":"<p>Criteria: - Temporary notes - Duplicate content - Broken/incomplete drafts - Test documentation</p> <p>Examples: - <code>test_*.md</code> - <code>backup_*.md</code> - <code>old_*.md</code> - Empty or stub files</p> <p>Actions: 1. Review for any valuable content 2. Delete permanently 3. Update any references</p>"},{"location":"specs/documentation-optimization/#content-optimization-checklist","title":"Content Optimization Checklist","text":""},{"location":"specs/documentation-optimization/#for-each-document","title":"For Each Document:","text":""},{"location":"specs/documentation-optimization/#1-add-frontmatter","title":"1. Add Frontmatter","text":"<pre><code>---\ntitle: Clear, Descriptive Title\ndescription: One-line summary for search\ndate_created: 2025-01-15\ndate_updated: 2025-07-17\ncategory: guide|reference|operation|architecture\ntags: [python, api, security, monitoring]\nstatus: current|archived|deprecated\nai_editable: true\nmaintainer: DAI|PAI|human\n---\n</code></pre>"},{"location":"specs/documentation-optimization/#2-structure-improvements","title":"2. Structure Improvements","text":"<ul> <li> Clear main heading (H1)</li> <li> Logical section hierarchy (H2, H3)</li> <li> Table of contents for long docs</li> <li> Summary/TLDR section at top</li> <li> Prerequisites clearly stated</li> </ul>"},{"location":"specs/documentation-optimization/#3-content-enhancements","title":"3. Content Enhancements","text":"<ul> <li> Add practical examples</li> <li> Include code snippets with syntax highlighting</li> <li> Add diagrams where helpful</li> <li> Include troubleshooting section</li> <li> Add \"See Also\" links</li> </ul>"},{"location":"specs/documentation-optimization/#4-format-standardization","title":"4. Format Standardization","text":"<pre><code># Document Title\n\n!!! abstract \"Summary\"\n    Brief description of what this document covers.\n\n## Prerequisites\n- Required knowledge\n- Required access\n- Required tools\n\n## Overview\nGeneral introduction...\n\n## Step-by-Step Guide (if applicable)\n1. First step\n2. Second step\n   ```bash\n   example command\n   ```\n\n## Configuration\n```yaml\nexample:\n  configuration: here\n</code></pre>"},{"location":"specs/documentation-optimization/#troubleshooting","title":"Troubleshooting","text":""},{"location":"specs/documentation-optimization/#common-issue-1","title":"Common Issue 1","text":"<p>Problem: Description Solution: Steps to fix</p>"},{"location":"specs/documentation-optimization/#see-also","title":"See Also","text":"<ul> <li>Related Document</li> <li>External Resource <pre><code>## Optimization Patterns\n\n### Pattern 1: Guide Consolidation\n**Before:** 5 separate authentication guides  \n**After:** 1 comprehensive authentication guide with sections\n\n### Pattern 2: API Documentation\n**Before:** Scattered endpoint documentation  \n**After:** Unified API reference with examples\n\n### Pattern 3: Troubleshooting\n**Before:** Issues mixed in various docs  \n**After:** Centralized troubleshooting guide\n\n## Quality Metrics\n\n### Good Documentation Has:\n- \u2705 Clear purpose stated upfront\n- \u2705 Practical examples\n- \u2705 Updated within 6 months\n- \u2705 Proper formatting\n- \u2705 Working links\n- \u2705 Search-friendly keywords\n\n### Poor Documentation Has:\n- \u274c Vague or missing purpose\n- \u274c Only theoretical explanation\n- \u274c Last updated &gt; 1 year ago\n- \u274c Inconsistent formatting\n- \u274c Broken links\n- \u274c No keywords or tags\n\n## Migration Priorities\n\n### Priority 1: Core Documentation\n1. CAG files (system knowledge)\n2. Authentication guides\n3. API references\n4. Getting started guides\n\n### Priority 2: Operational Docs\n1. Troubleshooting guides\n2. Maintenance procedures\n3. Monitoring setup\n4. Security documentation\n\n### Priority 3: Development Docs\n1. Architecture decisions\n2. Development guides\n3. Tool documentation\n4. Integration guides\n\n### Priority 4: Context &amp; Archives\n1. Historical decisions\n2. Deprecated features\n3. Old specifications\n4. Meeting notes\n\n## Automation Opportunities\n\n### 1. Link Checker\n```python\n# check_links.py\nimport re\nfrom pathlib import Path\n\ndef check_markdown_links(file_path):\n    \"\"\"Check all links in a markdown file\"\"\"\n    # Find [text](link) patterns\n    # Verify internal links exist\n    # Check external links respond\n</code></pre></li> </ul>"},{"location":"specs/documentation-optimization/#2-metadata-generator","title":"2. Metadata Generator","text":"<pre><code># add_metadata.py\ndef generate_frontmatter(file_path):\n    \"\"\"Generate frontmatter from file content\"\"\"\n    # Extract title from first H1\n    # Generate tags from content\n    # Add timestamps\n</code></pre>"},{"location":"specs/documentation-optimization/#3-content-analyzer","title":"3. Content Analyzer","text":"<pre><code># analyze_content.py\ndef analyze_document_quality(file_path):\n    \"\"\"Score document quality\"\"\"\n    # Check structure\n    # Count examples\n    # Verify formatting\n    # Return quality score\n</code></pre>"},{"location":"specs/documentation-optimization/#review-process","title":"Review Process","text":""},{"location":"specs/documentation-optimization/#before-migration","title":"Before Migration:","text":"<ol> <li>Read document completely</li> <li>Check last update date</li> <li>Verify information accuracy</li> <li>Test any commands/code</li> <li>Update as needed</li> </ol>"},{"location":"specs/documentation-optimization/#during-migration","title":"During Migration:","text":"<ol> <li>Apply optimization checklist</li> <li>Merge related content</li> <li>Fix all broken links</li> <li>Add proper metadata</li> <li>Ensure AI-friendly format</li> </ol>"},{"location":"specs/documentation-optimization/#after-migration","title":"After Migration:","text":"<ol> <li>Test in MkDocs preview</li> <li>Verify search works</li> <li>Check mobile rendering</li> <li>Validate all links</li> <li>Get feedback</li> </ol>"},{"location":"specs/documentation-optimization/#success-metrics","title":"Success Metrics","text":""},{"location":"specs/documentation-optimization/#quantitative","title":"Quantitative:","text":"<ul> <li>\ud83d\udcca Reduce total docs by 30% (through merging)</li> <li>\ud83d\udcca 100% docs have frontmatter</li> <li>\ud83d\udcca 0 broken internal links</li> <li>\ud83d\udcca All docs updated within last year</li> </ul>"},{"location":"specs/documentation-optimization/#qualitative","title":"Qualitative:","text":"<ul> <li>\ud83d\udcc8 Easier to find information</li> <li>\ud83d\udcc8 Consistent formatting</li> <li>\ud83d\udcc8 Better search results</li> <li>\ud83d\udcc8 AI agents can navigate effectively</li> </ul>"},{"location":"specs/documentation-optimization/#common-pitfalls-to-avoid","title":"Common Pitfalls to Avoid","text":"<ol> <li>Over-consolidation: Don't merge unrelated topics</li> <li>Under-documentation: Keep essential details</li> <li>Breaking links: Always redirect old URLs</li> <li>Losing history: Archive, don't delete important docs</li> <li>Ignoring users: Consider who reads each doc</li> </ol>"},{"location":"specs/documentation-optimization/#tools-resources","title":"Tools &amp; Resources","text":""},{"location":"specs/documentation-optimization/#markdown-linters","title":"Markdown Linters","text":"<ul> <li>markdownlint</li> <li>mdl</li> <li>remark</li> </ul>"},{"location":"specs/documentation-optimization/#link-checkers","title":"Link Checkers","text":"<ul> <li>markdown-link-check</li> <li>linkchecker</li> </ul>"},{"location":"specs/documentation-optimization/#converters","title":"Converters","text":"<ul> <li>pandoc (for non-markdown sources)</li> <li>html2text (for HTML content)</li> </ul>"},{"location":"specs/documentation-optimization/#final-notes","title":"Final Notes","text":"<p>Remember: The goal is not just to move documentation, but to improve it. Every document should be better after migration than before. If a document can't be improved, consider if it's truly needed.</p>"},{"location":"specs/implementation/","title":"Implementation Guides","text":"<p>Practical guides for implementing specifications.</p>"},{"location":"specs/implementation/#implementation-process","title":"Implementation Process","text":""},{"location":"specs/implementation/#1-planning-phase","title":"1. Planning Phase","text":"<ul> <li>Review specification thoroughly</li> <li>Identify dependencies</li> <li>Create implementation checklist</li> <li>Set up development environment</li> </ul>"},{"location":"specs/implementation/#2-development-phase","title":"2. Development Phase","text":"<ul> <li>Follow specification requirements</li> <li>Write tests first (TDD approach)</li> <li>Document as you build</li> <li>Regular commits with clear messages</li> </ul>"},{"location":"specs/implementation/#3-testing-phase","title":"3. Testing Phase","text":"<ul> <li>Unit tests for components</li> <li>Integration tests for systems</li> <li>User acceptance testing</li> <li>Performance benchmarking</li> </ul>"},{"location":"specs/implementation/#4-deployment-phase","title":"4. Deployment Phase","text":"<ul> <li>Review deployment checklist</li> <li>Update documentation</li> <li>Deploy to production</li> <li>Monitor for issues</li> </ul>"},{"location":"specs/implementation/#current-implementations","title":"Current Implementations","text":""},{"location":"specs/implementation/#recently-completed","title":"Recently Completed","text":""},{"location":"specs/implementation/#mkdocs-documentation-system","title":"MkDocs Documentation System","text":"<ul> <li>Spec: MkDocs Migration Plan</li> <li>Status: \u2705 Deployed</li> <li>URL: https://docs.kaut.to</li> <li>Notes: Successfully migrated from scattered docs</li> </ul>"},{"location":"specs/implementation/#context-library","title":"Context Library","text":"<ul> <li>Spec: Context Library v0.1</li> <li>Status: \u2705 Implemented</li> <li>Location: <code>/srv/apps/docs/docs/context/</code></li> <li>Notes: CAG system fully integrated</li> </ul>"},{"location":"specs/implementation/#in-progress","title":"In Progress","text":""},{"location":"specs/implementation/#task-management-v2","title":"Task Management v2","text":"<ul> <li>Spec: Task v2</li> <li>Status: \ud83d\udea7 60% Complete</li> <li>Target: Q1 2025</li> <li>Next Steps: API integration, UI updates</li> </ul>"},{"location":"specs/implementation/#browser-testing-toolkit","title":"Browser Testing Toolkit","text":"<ul> <li>Spec: Browser Testing Toolkit</li> <li>Status: \ud83d\udea7 40% Complete</li> <li>Target: Q1 2025</li> <li>Next Steps: Playwright integration</li> </ul>"},{"location":"specs/implementation/#implementation-templates","title":"Implementation Templates","text":""},{"location":"specs/implementation/#service-implementation","title":"Service Implementation","text":"<pre><code># Standard service structure\n/srv/apps/{service-name}/\n\u251c\u2500\u2500 app.py              # Main application\n\u251c\u2500\u2500 config.py           # Configuration\n\u251c\u2500\u2500 requirements.txt    # Dependencies\n\u251c\u2500\u2500 README.md          # Documentation\n\u251c\u2500\u2500 tests/             # Test suite\n\u2514\u2500\u2500 {service}.service  # Systemd unit\n</code></pre>"},{"location":"specs/implementation/#api-implementation","title":"API Implementation","text":"<pre><code># FastAPI structure\n/srv/api/{endpoint}/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 router.py          # Route definitions\n\u251c\u2500\u2500 models.py          # Data models\n\u251c\u2500\u2500 services.py        # Business logic\n\u2514\u2500\u2500 tests/            # API tests\n</code></pre>"},{"location":"specs/implementation/#best-practices","title":"Best Practices","text":""},{"location":"specs/implementation/#code-quality","title":"Code Quality","text":"<ul> <li>Follow PEP 8 for Python</li> <li>Use type hints</li> <li>Write comprehensive docstrings</li> <li>Keep functions small and focused</li> </ul>"},{"location":"specs/implementation/#testing","title":"Testing","text":"<ul> <li>Minimum 80% code coverage</li> <li>Test edge cases</li> <li>Mock external dependencies</li> <li>Regular integration tests</li> </ul>"},{"location":"specs/implementation/#documentation","title":"Documentation","text":"<ul> <li>Update specs during implementation</li> <li>Document deviations</li> <li>Keep README files current</li> <li>Add inline code comments</li> </ul>"},{"location":"specs/implementation/#security","title":"Security","text":"<ul> <li>Never hardcode credentials</li> <li>Use environment variables</li> <li>Implement proper authentication</li> <li>Regular security audits</li> </ul>"},{"location":"specs/implementation/#implementation-checklist","title":"Implementation Checklist","text":"<ul> <li> Specification reviewed and understood</li> <li> Dependencies identified and available</li> <li> Development environment set up</li> <li> Tests written (TDD)</li> <li> Code implemented per spec</li> <li> Documentation updated</li> <li> Code reviewed</li> <li> Tests passing</li> <li> Deployed to staging</li> <li> User acceptance complete</li> <li> Deployed to production</li> <li> Monitoring configured</li> <li> Post-deployment verification</li> </ul>"},{"location":"specs/implementation/#common-pitfalls","title":"Common Pitfalls","text":""},{"location":"specs/implementation/#avoid-these-mistakes","title":"Avoid These Mistakes","text":"<ol> <li>Skipping tests - Always write tests first</li> <li>Ignoring the spec - Follow requirements closely</li> <li>Poor error handling - Handle all edge cases</li> <li>Missing documentation - Document as you go</li> <li>Hardcoded values - Use configuration files</li> </ol>"},{"location":"specs/implementation/#when-things-go-wrong","title":"When Things Go Wrong","text":"<ol> <li>Check the specification</li> <li>Review error logs</li> <li>Verify dependencies</li> <li>Test in isolation</li> <li>Ask for help if stuck</li> </ol>"},{"location":"specs/implementation/#resources","title":"Resources","text":"<ul> <li>Architecture Overview</li> <li>Development Setup</li> <li>Testing Guide</li> <li>Deployment Guide</li> </ul> <p>Remember</p> <p>A good implementation follows the specification closely but remains flexible enough to handle real-world requirements.</p>"},{"location":"specs/kaut-apps-repository/","title":"kaut-apps Repository Structure","text":""},{"location":"specs/kaut-apps-repository/#overview","title":"Overview","text":"<p>Consolidate all kaut.to applications into a single monorepo for easier management, consistent deployment, and shared utilities.</p>"},{"location":"specs/kaut-apps-repository/#repository-githubcomjkauttokaut-apps","title":"Repository: github.com/jkautto/kaut-apps","text":""},{"location":"specs/kaut-apps-repository/#structure","title":"Structure","text":"<pre><code>kaut-apps/\n\u251c\u2500\u2500 README.md                    # Main documentation\n\u251c\u2500\u2500 .github/\n\u2502   \u251c\u2500\u2500 workflows/\n\u2502   \u2502   \u251c\u2500\u2500 deploy-all.yml      # Deploy all apps\n\u2502   \u2502   \u251c\u2500\u2500 deploy-pastebin.yml # Deploy pastebin only\n\u2502   \u2502   \u251c\u2500\u2500 deploy-tasks.yml    # Deploy tasks only\n\u2502   \u2502   \u2514\u2500\u2500 test.yml            # Run all tests\n\u2502   \u2514\u2500\u2500 ISSUE_TEMPLATE/\n\u251c\u2500\u2500 shared/                      # Shared utilities\n\u2502   \u251c\u2500\u2500 auth/                   # Common auth logic\n\u2502   \u251c\u2500\u2500 models/                 # Shared data models\n\u2502   \u2514\u2500\u2500 utils/                  # Helper functions\n\u251c\u2500\u2500 pastebin/                   # pb.kaut.to\n\u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u251c\u2500\u2500 README.md\n\u2502   \u251c\u2500\u2500 app.py\n\u2502   \u251c\u2500\u2500 requirements.txt\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u251c\u2500\u2500 database.py\n\u2502   \u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 tests/\n\u251c\u2500\u2500 tasks/                      # task.kaut.to\n\u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u251c\u2500\u2500 README.md\n\u2502   \u251c\u2500\u2500 requirements.txt\n\u2502   \u251c\u2500\u2500 backend/\n\u2502   \u2502   \u251c\u2500\u2500 main.py\n\u2502   \u2502   \u251c\u2500\u2500 api/\n\u2502   \u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u2514\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 frontend/\n\u2502   \u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2502   \u251c\u2500\u2500 app.js\n\u2502   \u2502   \u2514\u2500\u2500 style.css\n\u2502   \u2514\u2500\u2500 tests/\n\u251c\u2500\u2500 auth/                       # auth.kaut.to\n\u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u251c\u2500\u2500 README.md\n\u2502   \u251c\u2500\u2500 app.py\n\u2502   \u2514\u2500\u2500 templates/\n\u251c\u2500\u2500 browser-test/               # test.kaut.to\n\u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u251c\u2500\u2500 docker-compose.yml\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2514\u2500\u2500 toolkit/\n\u2514\u2500\u2500 scripts/                    # Deployment &amp; maintenance\n    \u251c\u2500\u2500 deploy.sh\n    \u251c\u2500\u2500 backup.sh\n    \u2514\u2500\u2500 health-check.sh\n</code></pre>"},{"location":"specs/kaut-apps-repository/#benefits","title":"Benefits","text":""},{"location":"specs/kaut-apps-repository/#1-unified-management","title":"1. Unified Management","text":"<ul> <li>Single repository to maintain</li> <li>Consistent versioning</li> <li>Shared dependencies</li> <li>Common CI/CD pipelines</li> </ul>"},{"location":"specs/kaut-apps-repository/#2-code-reuse","title":"2. Code Reuse","text":"<ul> <li>Shared authentication logic</li> <li>Common utilities</li> <li>Consistent API patterns</li> <li>Unified documentation</li> </ul>"},{"location":"specs/kaut-apps-repository/#3-deployment-simplification","title":"3. Deployment Simplification","text":"<ul> <li>One repository to deploy from</li> <li>Atomic deployments possible</li> <li>Rollback entire system</li> <li>Environment consistency</li> </ul>"},{"location":"specs/kaut-apps-repository/#4-development-efficiency","title":"4. Development Efficiency","text":"<ul> <li>Single clone for all apps</li> <li>Cross-app refactoring easier</li> <li>Shared development environment</li> <li>Consistent coding standards</li> </ul>"},{"location":"specs/kaut-apps-repository/#migration-plan","title":"Migration Plan","text":""},{"location":"specs/kaut-apps-repository/#phase-1-repository-creation","title":"Phase 1: Repository Creation","text":"<pre><code># Create new repository\ngh repo create jkautto/kaut-apps --private\n\n# Clone and setup\ngit clone https://github.com/jkautto/kaut-apps.git\ncd kaut-apps\n\n# Create structure\nmkdir -p {pastebin,tasks,auth,browser-test,shared,scripts}\n</code></pre>"},{"location":"specs/kaut-apps-repository/#phase-2-pastebin-migration","title":"Phase 2: Pastebin Migration","text":"<pre><code># Copy pastebin files\ncp -r /srv/apps/pastebin/* ./pastebin/\n\n# Remove old symlinks/references\n# Update imports to use shared utilities\n\n# Commit\ngit add pastebin/\ngit commit -m \"Migrate pastebin app from /srv/apps\"\n</code></pre>"},{"location":"specs/kaut-apps-repository/#phase-3-add-new-apps","title":"Phase 3: Add New Apps","text":"<pre><code># Create tasks app structure\nmkdir -p tasks/{backend,frontend,tests}\n\n# Copy existing task files\ncp /var/www/kaut.to/tasks/* ./tasks/frontend/\n\n# Develop backend\n# ... implementation ...\n</code></pre>"},{"location":"specs/kaut-apps-repository/#deployment-strategy","title":"Deployment Strategy","text":""},{"location":"specs/kaut-apps-repository/#local-development","title":"Local Development","text":"<pre><code># Run all apps locally\n./scripts/run-local.sh\n\n# Run specific app\ncd pastebin &amp;&amp; python3 app.py\n</code></pre>"},{"location":"specs/kaut-apps-repository/#production-deployment","title":"Production Deployment","text":"<pre><code># Deploy all apps\n./scripts/deploy.sh all\n\n# Deploy specific app\n./scripts/deploy.sh pastebin\n\n# Health check\n./scripts/health-check.sh\n</code></pre>"},{"location":"specs/kaut-apps-repository/#service-management","title":"Service Management","text":"<p>Each app has its own systemd service: - <code>kaut-pastebin.service</code> - <code>kaut-tasks.service</code> - <code>kaut-auth.service</code> - <code>kaut-browser-test.service</code></p>"},{"location":"specs/kaut-apps-repository/#github-actions","title":"GitHub Actions","text":""},{"location":"specs/kaut-apps-repository/#automated-deployment","title":"Automated Deployment","text":"<pre><code># .github/workflows/deploy-all.yml\nname: Deploy All Apps\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - name: Deploy to server\n        run: |\n          ssh joni@kaut.to 'cd /srv/apps &amp;&amp; ./update-from-github.sh'\n</code></pre>"},{"location":"specs/kaut-apps-repository/#best-practices","title":"Best Practices","text":"<ol> <li>Consistent Structure: Each app follows same layout</li> <li>Shared Standards: Common linting, formatting</li> <li>Documentation: Each app has its own README</li> <li>Testing: Unified test suite</li> <li>Versioning: Semantic versioning for releases</li> </ol>"},{"location":"specs/kaut-apps-repository/#future-additions","title":"Future Additions","text":"<p>Planned apps for the monorepo: - <code>notes/</code> - note.kaut.to (simple notes) - <code>files/</code> - files.kaut.to (file manager) - <code>api/</code> - api.kaut.to (unified API gateway) - <code>dashboard/</code> - dash.kaut.to (system dashboard)</p> <p>This structure provides a scalable foundation for all kaut.to applications</p>"},{"location":"specs/kaut-pastebin/","title":"Kaut.to Pastebin v1.0 Specification","text":""},{"location":"specs/kaut-pastebin/#overview","title":"Overview","text":"<p>A simple, internal pastebin tool for uploading and sharing files between Joni, DAI, and PAI. Accessible at https://kaut.to/pb with HTTP basic auth.</p>"},{"location":"specs/kaut-pastebin/#technical-stack-decision","title":"Technical Stack Decision","text":"<p>After researching various approaches, I've chosen: - Backend: Flask (simpler than FastAPI for this use case, plenty of examples) - Frontend: Vanilla JS with Dropzone.js for drag &amp; drop - Storage: File system with JSON metadata (simple for MVP) - Server: Gunicorn behind nginx proxy</p>"},{"location":"specs/kaut-pastebin/#architecture","title":"Architecture","text":""},{"location":"specs/kaut-pastebin/#directory-structure","title":"Directory Structure","text":"<pre><code>/var/www/kaut.to/pb/\n\u251c\u2500\u2500 app.py                 # Main Flask application\n\u251c\u2500\u2500 requirements.txt       # Python dependencies\n\u251c\u2500\u2500 config.py             # Configuration settings\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 index.html        # Main upload interface\n\u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 css/\n\u2502   \u2502   \u2514\u2500\u2500 style.css\n\u2502   \u2514\u2500\u2500 js/\n\u2502       \u2514\u2500\u2500 upload.js     # Drag/drop/paste logic\n\u251c\u2500\u2500 uploads/              # File storage\n\u2502   \u2514\u2500\u2500 2025/\n\u2502       \u2514\u2500\u2500 01/\n\u2502           \u2514\u2500\u2500 12/\n\u2502               \u2514\u2500\u2500 original_filename.ext\n\u251c\u2500\u2500 thumbnails/           # Generated thumbnails\n\u2514\u2500\u2500 metadata.json         # File metadata storage\n</code></pre>"},{"location":"specs/kaut-pastebin/#core-features-v10","title":"Core Features (v1.0)","text":""},{"location":"specs/kaut-pastebin/#1-file-upload","title":"1. File Upload","text":"<ul> <li>Methods: Drag &amp; drop, click to browse, clipboard paste (Cmd+V)</li> <li>Size Limit: 500MB max, warning at 50MB</li> <li>File Types: Images (png, jpg, gif, webp), documents (pdf, txt), archives (zip)</li> <li>Storage: Original filenames in date-based folders</li> </ul>"},{"location":"specs/kaut-pastebin/#2-file-display","title":"2. File Display","text":"<ul> <li>List: Last 10 uploaded files</li> <li>Info: Filename, upload time, file size</li> <li>URLs: Internal path and public URL</li> <li>Actions: Copy URL buttons for both paths</li> </ul>"},{"location":"specs/kaut-pastebin/#3-auto-delete","title":"3. Auto-Delete","text":"<ul> <li>Files older than 3 days are automatically deleted</li> <li>Runs via cron job every hour</li> </ul>"},{"location":"specs/kaut-pastebin/#4-security","title":"4. Security","text":"<ul> <li>HTTP Basic Auth (joni:Penacova)</li> <li>Files served through Flask (auth protected)</li> <li>No file type validation (internal tool)</li> </ul>"},{"location":"specs/kaut-pastebin/#implementation-plan","title":"Implementation Plan","text":""},{"location":"specs/kaut-pastebin/#backend-apppy","title":"Backend (app.py)","text":"<pre><code>from flask import Flask, render_template, request, jsonify, send_file\nfrom werkzeug.utils import secure_filename\nimport os\nimport json\nimport datetime\nfrom pathlib import Path\n\napp = Flask(__name__)\n\n# Configuration\nUPLOAD_FOLDER = '/var/www/kaut.to/pb/uploads'\nTHUMB_FOLDER = '/var/www/kaut.to/pb/thumbnails'\nMETADATA_FILE = '/var/www/kaut.to/pb/metadata.json'\nMAX_FILE_SIZE = 500 * 1024 * 1024  # 500MB\nWARNING_SIZE = 50 * 1024 * 1024    # 50MB\n\n@app.route('/')\ndef index():\n    \"\"\"Main upload interface\"\"\"\n    files = get_recent_files(10)\n    return render_template('index.html', files=files)\n\n@app.route('/upload', methods=['POST'])\ndef upload():\n    \"\"\"Handle file upload\"\"\"\n    # Implementation details in actual code\n\n@app.route('/files/&lt;path:filepath&gt;')\ndef serve_file(filepath):\n    \"\"\"Serve uploaded files\"\"\"\n    # Implementation details in actual code\n\n@app.route('/api/recent')\ndef api_recent():\n    \"\"\"API endpoint for recent files\"\"\"\n    return jsonify(get_recent_files(10))\n</code></pre>"},{"location":"specs/kaut-pastebin/#frontend-indexhtml","title":"Frontend (index.html)","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Kaut.to Pastebin&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.css\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"/static/css/style.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;h1&gt;Kaut.to Pastebin&lt;/h1&gt;\n\n        &lt;!-- Upload Area --&gt;\n        &lt;div id=\"dropzone\" class=\"dropzone\"&gt;\n            &lt;div class=\"dz-message\"&gt;\n                Drop files here, click to browse, or paste with Cmd+V\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;!-- Recent Files --&gt;\n        &lt;div class=\"recent-files\"&gt;\n            &lt;h2&gt;Recent Files&lt;/h2&gt;\n            &lt;table id=\"file-list\"&gt;\n                &lt;!-- Populated by JavaScript --&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/static/js/upload.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"specs/kaut-pastebin/#javascript-uploadjs","title":"JavaScript (upload.js)","text":"<p>Key features: - Dropzone configuration - Clipboard paste handler - Copy to clipboard functionality - File list updates</p>"},{"location":"specs/kaut-pastebin/#auto-delete-script-cleanuppy","title":"Auto-Delete Script (cleanup.py)","text":"<pre><code>#!/usr/bin/env python3\nimport os\nimport time\nfrom datetime import datetime, timedelta\nimport json\n\nDELETE_AFTER_DAYS = 3\n\ndef cleanup_old_files():\n    \"\"\"Delete files older than DELETE_AFTER_DAYS\"\"\"\n    # Implementation details in actual code\n</code></pre>"},{"location":"specs/kaut-pastebin/#nginx-configuration","title":"Nginx Configuration","text":"<pre><code>location /pb {\n    auth_basic \"Pastebin Access\";\n    auth_basic_user_file /etc/nginx/auth/.htpasswd;\n\n    proxy_pass http://127.0.0.1:8090;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $host;\n\n    # Large file support\n    client_max_body_size 500M;\n    proxy_read_timeout 300s;\n}\n</code></pre>"},{"location":"specs/kaut-pastebin/#url-structure","title":"URL Structure","text":"<ul> <li>Upload Interface: https://kaut.to/pb/</li> <li>File Access: https://kaut.to/pb/files/2025/01/12/filename.ext</li> <li>API Recent: https://kaut.to/pb/api/recent</li> </ul>"},{"location":"specs/kaut-pastebin/#metadata-structure","title":"Metadata Structure","text":"<pre><code>{\n  \"files\": [\n    {\n      \"id\": \"abc123\",\n      \"filename\": \"screenshot.png\",\n      \"path\": \"2025/01/12/screenshot.png\",\n      \"size\": 1048576,\n      \"uploaded\": \"2025-01-12T10:30:00Z\",\n      \"mime_type\": \"image/png\"\n    }\n  ]\n}\n</code></pre>"},{"location":"specs/kaut-pastebin/#integration-with-jtools","title":"Integration with jtools","text":"<p>Update ft.py and screenshot.py: <pre><code># Replace pictool.combot.dev with kaut.to/pb\nself.url = \"https://kaut.to/pb/upload\"\n</code></pre></p>"},{"location":"specs/kaut-pastebin/#deployment-steps","title":"Deployment Steps","text":"<ol> <li>Create directory structure</li> <li>Install Flask app with dependencies</li> <li>Configure Gunicorn service</li> <li>Set up nginx proxy</li> <li>Add cleanup cron job</li> <li>Update jtools integration</li> </ol>"},{"location":"specs/kaut-pastebin/#success-criteria","title":"Success Criteria","text":"<ul> <li> Files can be uploaded via drag &amp; drop</li> <li> Clipboard paste works (Cmd+V)</li> <li> Last 10 files are displayed</li> <li> Copy URL buttons work</li> <li> Files auto-delete after 3 days</li> <li> jtools integration works</li> <li> HTTP auth protects access</li> </ul>"},{"location":"specs/kaut-pastebin/#future-enhancements-v20","title":"Future Enhancements (v2.0)","text":"<ul> <li>Public/private file toggle</li> <li>Search functionality</li> <li>File type icons</li> <li>Syntax highlighting for code</li> <li>ShareX custom uploader support</li> <li>API tokens for programmatic access</li> </ul>"},{"location":"specs/mkdocs-migration-plan/","title":"MkDocs Migration Plan - Updated Status","text":"<p>Version: 1.1 Date: 2025-07-17 Status: Phase 2 Complete, Phase 3 Ready</p>"},{"location":"specs/mkdocs-migration-plan/#overall-progress-40-complete","title":"Overall Progress: 40% Complete","text":""},{"location":"specs/mkdocs-migration-plan/#phase-1-repository-cleanup-complete","title":"\u2705 Phase 1: Repository Cleanup (COMPLETE)","text":"<ul> <li>Removed <code>/srv/.git</code> </li> <li>Created <code>https://github.com/jkautto/apps</code></li> <li>Initialized apps repository</li> <li>Cleaned up app subdirectory git files</li> </ul>"},{"location":"specs/mkdocs-migration-plan/#phase-2-mkdocs-setup-complete","title":"\u2705 Phase 2: MkDocs Setup (COMPLETE)","text":"<ul> <li>Installed MkDocs + Material theme</li> <li>Created comprehensive configuration</li> <li>Built initial documentation structure</li> <li>Created homepage, architecture, and getting started pages</li> </ul>"},{"location":"specs/mkdocs-migration-plan/#phase-3-nginx-configuration-90-one-line-fix-needed","title":"\ud83d\udd04 Phase 3: nginx Configuration (90% - One Line Fix Needed)","text":"<ul> <li>SSL certificate updated \u2705</li> <li>Configuration file created \u2705</li> <li>FIX NEEDED: Line 15 in <code>/etc/nginx/sites-available/docs.kaut.to</code> <pre><code>ssl_ciphers HIGH:!aNULL:!MD5;  # Remove backslashes\n</code></pre></li> </ul>"},{"location":"specs/mkdocs-migration-plan/#phase-4-documentation-migration-not-started","title":"\ud83d\udccb Phase 4: Documentation Migration (NOT STARTED)","text":"<p>Priority order for migration: 1. CAG Files (5 files)    - <code>/srv/CAG/*.md</code>    - Critical system knowledge</p> <ol> <li>Core Documentation (~31 files)</li> <li><code>/srv/docs/guides/</code></li> <li><code>/srv/docs/operations/</code></li> <li> <p><code>/srv/docs/troubleshooting/</code></p> </li> <li> <p>Specifications (~32 files)</p> </li> <li><code>/srv/specs/</code> (active specs only)</li> <li> <p>Archive older specs</p> </li> <li> <p>Context Library (~19 files)</p> </li> <li><code>/srv/context/current/</code></li> <li> <p><code>/srv/context/development/</code></p> </li> <li> <p>PAI Documentation (~50 files)</p> </li> <li><code>/srv/pai/docs/</code></li> </ol>"},{"location":"specs/mkdocs-migration-plan/#phase-5-content-optimization-not-started","title":"\ud83d\udcdd Phase 5: Content Optimization (NOT STARTED)","text":"<p>For each document: - Add frontmatter metadata - Fix internal links - Standardize formatting - Remove redundancy - Archive outdated content</p>"},{"location":"specs/mkdocs-migration-plan/#phase-6-deployment-ready","title":"\ud83d\ude80 Phase 6: Deployment (READY)","text":"<p>Once nginx is fixed: <pre><code>cd /srv/apps/docs\nsource venv/bin/activate\nmkdocs build\n</code></pre></p>"},{"location":"specs/mkdocs-migration-plan/#phase-7-git-workflow-pending","title":"\ud83d\udd04 Phase 7: Git Workflow (PENDING)","text":"<ul> <li>Initial commit ready</li> <li>Need to push to GitHub</li> <li>Set up branches per workflow guide</li> </ul>"},{"location":"specs/mkdocs-migration-plan/#phase-8-ai-integration-future","title":"\ud83e\udd16 Phase 8: AI Integration (FUTURE)","text":"<ul> <li>Create update endpoints</li> <li>Implement llms.txt</li> <li>Add programmatic access</li> </ul>"},{"location":"specs/mkdocs-migration-plan/#time-estimate-to-completion","title":"Time Estimate to Completion","text":"Phase Status Time Remaining nginx Fix 90% 5 minutes Build &amp; Deploy Ready 10 minutes Git Push Ready 5 minutes Doc Migration 0% 3-4 hours Optimization 0% 2-3 hours AI Integration 0% 2 hours Total 40% ~8 hours"},{"location":"specs/mkdocs-migration-plan/#critical-path-items","title":"Critical Path Items","text":"<ol> <li>Fix nginx cipher string (5 min)</li> <li>Build and test site (10 min)</li> <li>Push to GitHub (5 min)</li> <li>Begin doc migration (start with CAG)</li> </ol>"},{"location":"specs/mkdocs-migration-plan/#repository-status","title":"Repository Status","text":""},{"location":"specs/mkdocs-migration-plan/#srvapps-structure","title":"<code>/srv/apps/</code> Structure","text":"<pre><code>apps/\n\u251c\u2500\u2500 .git/           \u2705 Initialized\n\u251c\u2500\u2500 .gitignore      \u2705 Comprehensive\n\u251c\u2500\u2500 README.md       \u2705 Complete\n\u251c\u2500\u2500 auth/           \u2705 Existing app\n\u251c\u2500\u2500 browser-test/   \u2705 Existing app\n\u251c\u2500\u2500 pastebin/       \u2705 Cleaned (.git removed)\n\u251c\u2500\u2500 shifts/         \u2705 Existing app\n\u2514\u2500\u2500 docs/           \u2705 MkDocs ready\n    \u251c\u2500\u2500 mkdocs.yml  \u2705 Configured\n    \u251c\u2500\u2500 docs/       \u2705 Initial content\n    \u251c\u2500\u2500 venv/       \u2705 Python environment\n    \u2514\u2500\u2500 site/       \ud83d\udd04 Pending build\n</code></pre>"},{"location":"specs/mkdocs-migration-plan/#key-decisions-made","title":"Key Decisions Made","text":"<ol> <li>URL: Using https://docs.kaut.to (not path-based)</li> <li>Auth: Basic auth with existing .htpasswd</li> <li>Theme: Material with dark mode</li> <li>Plugins: Search, minify, git dates</li> <li>Structure: Seven main sections</li> </ol>"},{"location":"specs/mkdocs-migration-plan/#success-criteria-checklist","title":"Success Criteria Checklist","text":"<ul> <li> Clean repository structure</li> <li> MkDocs configuration complete</li> <li> nginx serving docs.kaut.to</li> <li> Documentation migrated</li> <li> Search working</li> <li> GitHub repository synced</li> <li> AI can update docs</li> </ul>"},{"location":"specs/mkdocs-migration-plan/#next-session-priority","title":"Next Session Priority","text":"<ol> <li>Fix nginx (remove backslashes from cipher string)</li> <li>Build MkDocs (<code>mkdocs build</code>)</li> <li>Test https://docs.kaut.to</li> <li>Commit and push to GitHub</li> <li>Start migrating CAG documentation</li> </ol> <p>The foundation is complete - just needs the nginx fix and content migration!</p>"},{"location":"specs/pai-web-dashboard/","title":"PAI Web Dashboard Specification v0.1","text":""},{"location":"specs/pai-web-dashboard/#modular-personal-ai-assistant-interface-for-kautto","title":"Modular Personal AI Assistant Interface for kaut.to","text":""},{"location":"specs/pai-web-dashboard/#executive-summary","title":"Executive Summary","text":"<p>This specification outlines the development of a modular web dashboard for PAI (Personal AI Assistant) at kaut.to. The system will start with a core chat interface and progressively add panels for email, calendar, tasks, and notes management. Built with NiceGUI for rapid development and easy modularity, it will integrate with the existing PAI Claude CLI backend.</p>"},{"location":"specs/pai-web-dashboard/#vision-goals","title":"Vision &amp; Goals","text":""},{"location":"specs/pai-web-dashboard/#primary-goal","title":"Primary Goal","text":"<p>Create a unified web interface where users can interact with their AI assistant and view all personal data streams in one compact, mobile-friendly dashboard.</p>"},{"location":"specs/pai-web-dashboard/#design-philosophy","title":"Design Philosophy","text":"<ul> <li>Apple-inspired but compact: Clean aesthetics with smaller fonts and denser information display</li> <li>Progressive disclosure: Start with chat, add features gradually</li> <li>Mobile-first: Optimized for iPhone 16 Pro Max (430\u00d7932px viewport)</li> <li>Context-aware: Leverages shared context library between DAI/PAI</li> <li>Real-time: Live updates across all panels</li> </ul>"},{"location":"specs/pai-web-dashboard/#technical-architecture","title":"Technical Architecture","text":""},{"location":"specs/pai-web-dashboard/#framework-choice-nicegui","title":"Framework Choice: NiceGUI","text":"<p>Rationale: - Pure Python (no JavaScript required) - Built-in components for chat, file upload, real-time updates - Easy panel/layout management - WebSocket support out of the box - Minimal code for maximum functionality</p>"},{"location":"specs/pai-web-dashboard/#system-architecture","title":"System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   nginx (kaut.to)                   \u2502\n\u2502                  HTTP Basic Auth                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          NiceGUI Web Server (port 8080)            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  Chat   \u2502  Email  \u2502 Calendar \u2502   Tasks    \u2502    \u2502\n\u2502  \u2502  Panel  \u2502 Summary \u2502   View   \u2502 Management \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502       \u2502         \u2502         \u2502           \u2502            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502         \u2502         \u2502           \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              PAI Backend Services                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Claude CLI   \u2502 \u2502   Toolkit   \u2502 \u2502 Intel Stack\u2502  \u2502\n\u2502  \u2502 with -c flag \u2502 \u2502   Modules   \u2502 \u2502 Collectors \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specs/pai-web-dashboard/#implementation-phases","title":"Implementation Phases","text":""},{"location":"specs/pai-web-dashboard/#phase-1-core-chat-interface-week-1","title":"Phase 1: Core Chat Interface (Week 1)","text":"<p>Features: - Single conversation view with Claude - File/image upload support - Voice input (using browser API) - Message history with scroll - Typing indicators - Real-time streaming responses</p> <p>Technical Details: <pre><code># Core structure\napp = NiceGUI()\n\n# Layout: Sidebar (collapsed on mobile) + Main chat area\n# Chat uses subprocess to call: claude -c -p \"user message\"\n# WebSocket for streaming responses\n# SQLite for message history\n</code></pre></p>"},{"location":"specs/pai-web-dashboard/#phase-2-multi-panel-foundation-week-2","title":"Phase 2: Multi-Panel Foundation (Week 2)","text":"<p>Features: - Collapsible sidebar navigation - Panel switching system - Email summary panel (placeholder) - Calendar view panel (placeholder) - Tasks panel (placeholder) - Settings panel</p> <p>Layout Mockup: <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2630 AI\u2502  Chat with PAI                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2524 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \ud83d\udcac  \u2502 \u2502 How can I help you today?  \u2502 \u2502\n\u2502 \ud83d\udce7  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \ud83d\udcc5  \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2713   \u2502 \u2502 [Type message...] \ud83c\udfa4 \ud83d\udcce \u27a4  \u2502 \u2502\n\u2502 \u2699\ufe0f  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></p>"},{"location":"specs/pai-web-dashboard/#phase-3-email-integration-week-3","title":"Phase 3: Email Integration (Week 3)","text":"<p>Features: - Live email summaries from monitoring - Unread count badges - Priority inbox view - Quick actions (archive, reply via AI) - Search functionality</p> <p>Integration: - Reads from <code>/srv/pai/intelligence_stack/data/</code> - Updates every 10 minutes (matching monitoring schedule) - Claude analyzes importance</p>"},{"location":"specs/pai-web-dashboard/#phase-4-calendar-integration-week-4","title":"Phase 4: Calendar Integration (Week 4)","text":"<p>Features: - Today/Week/Month views - Conflict detection highlights - Meeting preparation alerts - Quick event creation - Finnish holidays display</p> <p>Integration: - Uses calendar_collector.py data - Real-time updates via WebSocket - Morning brief integration</p>"},{"location":"specs/pai-web-dashboard/#phase-5-task-management-week-5","title":"Phase 5: Task Management (Week 5)","text":"<p>Features: - Task lists with priorities - Drag-and-drop reordering - Quick add with natural language - Due date tracking - Project grouping</p> <p>Integration: - Syncs with Google Tasks via gtask.py - Stores in shared task format</p>"},{"location":"specs/pai-web-dashboard/#uiux-specifications","title":"UI/UX Specifications","text":""},{"location":"specs/pai-web-dashboard/#design-system","title":"Design System","text":"<pre><code>/* Typography */\n--font-primary: -apple-system, SF Pro Text, sans-serif;\n--font-size-base: 14px; /* Smaller than typical */\n--font-size-small: 12px;\n--line-height-compact: 1.3;\n\n/* Colors */\n--color-primary: #007AFF; /* Apple blue */\n--color-background: #FFFFFF;\n--color-surface: #F2F2F7;\n--color-text: #1C1C1E;\n--color-text-secondary: #8E8E93;\n\n/* Spacing */\n--spacing-xs: 4px;\n--spacing-sm: 8px;\n--spacing-md: 12px;\n--spacing-lg: 16px;\n\n/* Components */\n--border-radius: 8px;\n--shadow-sm: 0 1px 3px rgba(0,0,0,0.1);\n</code></pre>"},{"location":"specs/pai-web-dashboard/#mobile-responsiveness","title":"Mobile Responsiveness","text":"<ul> <li>Breakpoints: </li> <li>Mobile: &lt; 768px (sidebar hidden, swipe to reveal)</li> <li>Tablet: 768-1024px (sidebar collapsible)</li> <li>Desktop: &gt; 1024px (sidebar always visible)</li> <li>Touch targets: Minimum 44\u00d744px</li> <li>Gestures: Swipe for panel navigation on mobile</li> </ul>"},{"location":"specs/pai-web-dashboard/#accessibility","title":"Accessibility","text":"<ul> <li>ARIA labels for all interactive elements</li> <li>Keyboard navigation support</li> <li>High contrast mode support</li> <li>Screen reader optimized</li> </ul>"},{"location":"specs/pai-web-dashboard/#integration-points","title":"Integration Points","text":""},{"location":"specs/pai-web-dashboard/#claude-cli-integration","title":"Claude CLI Integration","text":"<pre><code>import subprocess\nimport asyncio\n\nasync def send_to_claude(message: str, context: str = None):\n    \"\"\"Send message to Claude CLI with persistent context\"\"\"\n    cmd = ['claude', '-c', '-p', message]\n    if context:\n        cmd.extend(['--context', context])\n\n    process = await asyncio.create_subprocess_exec(\n        *cmd,\n        stdout=asyncio.subprocess.PIPE,\n        stderr=asyncio.subprocess.PIPE\n    )\n\n    # Stream response back via WebSocket\n    async for line in process.stdout:\n        yield line.decode().strip()\n</code></pre>"},{"location":"specs/pai-web-dashboard/#context-library-integration","title":"Context Library Integration","text":"<pre><code># Shared context path\nCONTEXT_PATH = '/srv/context/current/'\n\n# Load user facts for personalization\nuser_facts = load_json(f'{CONTEXT_PATH}/user_facts.json')\n\n# Load system facts for capabilities\nsystem_facts = load_json(f'{CONTEXT_PATH}/system_facts.json')\n\n# Update context based on interactions\nupdate_context_library(conversation_id, new_facts)\n</code></pre>"},{"location":"specs/pai-web-dashboard/#authentication","title":"Authentication","text":"<ul> <li>Leverage existing nginx HTTP Basic Auth</li> <li>No additional auth layer needed initially</li> <li>Future: OAuth2 integration for multi-user</li> </ul>"},{"location":"specs/pai-web-dashboard/#file-structure","title":"File Structure","text":"<pre><code>/srv/pai/web/\n\u251c\u2500\u2500 main.py              # NiceGUI application entry\n\u251c\u2500\u2500 panels/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 chat.py         # Chat interface panel\n\u2502   \u251c\u2500\u2500 email.py        # Email summary panel\n\u2502   \u251c\u2500\u2500 calendar.py     # Calendar view panel\n\u2502   \u251c\u2500\u2500 tasks.py        # Task management panel\n\u2502   \u2514\u2500\u2500 settings.py     # Settings panel\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 claude_service.py    # Claude CLI wrapper\n\u2502   \u251c\u2500\u2500 context_service.py   # Context library interface\n\u2502   \u2514\u2500\u2500 data_service.py      # Data collectors interface\n\u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 css/\n\u2502   \u2502   \u2514\u2500\u2500 custom.css  # Custom styles\n\u2502   \u2514\u2500\u2500 js/\n\u2502       \u2514\u2500\u2500 voice.js    # Voice input handling\n\u251c\u2500\u2500 templates/           # If needed for custom components\n\u2514\u2500\u2500 requirements.txt     # Dependencies\n</code></pre>"},{"location":"specs/pai-web-dashboard/#development-timeline","title":"Development Timeline","text":""},{"location":"specs/pai-web-dashboard/#week-1-foundation","title":"Week 1: Foundation","text":"<ul> <li> Setup NiceGUI project structure</li> <li> Implement basic chat interface</li> <li> Add Claude CLI integration</li> <li> File/image upload support</li> <li> Deploy behind nginx</li> </ul>"},{"location":"specs/pai-web-dashboard/#week-2-multi-panel-system","title":"Week 2: Multi-Panel System","text":"<ul> <li> Create panel navigation</li> <li> Add placeholder panels</li> <li> Implement panel state management</li> <li> Mobile swipe gestures</li> <li> Settings panel</li> </ul>"},{"location":"specs/pai-web-dashboard/#week-3-5-feature-panels","title":"Week 3-5: Feature Panels","text":"<ul> <li> Email integration and UI</li> <li> Calendar integration and views</li> <li> Task management system</li> <li> Real-time updates</li> <li> Performance optimization</li> </ul>"},{"location":"specs/pai-web-dashboard/#week-6-polish-launch","title":"Week 6: Polish &amp; Launch","text":"<ul> <li> UI refinements</li> <li> Performance testing</li> <li> Documentation</li> <li> Deployment optimization</li> <li> User feedback integration</li> </ul>"},{"location":"specs/pai-web-dashboard/#performance-considerations","title":"Performance Considerations","text":""},{"location":"specs/pai-web-dashboard/#optimization-strategies","title":"Optimization Strategies","text":"<ol> <li>Lazy loading: Load panels only when accessed</li> <li>Caching: Cache frequently accessed data</li> <li>Debouncing: Limit API calls during typing</li> <li>Virtual scrolling: For long lists</li> <li>WebSocket connection pooling: Reuse connections</li> </ol>"},{"location":"specs/pai-web-dashboard/#monitoring","title":"Monitoring","text":"<ul> <li>Track API usage per panel</li> <li>Monitor WebSocket connection health</li> <li>Log panel load times</li> <li>Track user interactions for UX improvements</li> </ul>"},{"location":"specs/pai-web-dashboard/#security-measures","title":"Security Measures","text":"<ol> <li>Input sanitization: Clean all user inputs</li> <li>Rate limiting: Prevent API abuse</li> <li>Content Security Policy: Restrict resource loading</li> <li>Session management: Timeout after inactivity</li> <li>Audit logging: Track all actions</li> </ol>"},{"location":"specs/pai-web-dashboard/#future-enhancements","title":"Future Enhancements","text":""},{"location":"specs/pai-web-dashboard/#version-02","title":"Version 0.2","text":"<ul> <li>Multi-conversation support</li> <li>Conversation search</li> <li>Export capabilities</li> <li>Keyboard shortcuts</li> <li>Dark mode</li> </ul>"},{"location":"specs/pai-web-dashboard/#version-03","title":"Version 0.3","text":"<ul> <li>Plugin system for custom panels</li> <li>API for third-party integrations</li> <li>Advanced context management</li> <li>Team collaboration features</li> <li>Mobile app wrapper</li> </ul>"},{"location":"specs/pai-web-dashboard/#success-metrics","title":"Success Metrics","text":"<ol> <li>Page load time: &lt; 1 second</li> <li>Time to first interaction: &lt; 2 seconds</li> <li>Mobile usability score: &gt; 95</li> <li>User engagement: &gt; 5 min average session</li> <li>API efficiency: &lt; 1000 tokens per interaction</li> </ol>"},{"location":"specs/pai-web-dashboard/#conclusion","title":"Conclusion","text":"<p>This modular approach allows PAI to start simple with a chat interface while building toward a comprehensive personal AI dashboard. NiceGUI provides the perfect balance of simplicity and capability for rapid development while maintaining the flexibility to grow into a full-featured system.</p>"},{"location":"specs/task-v2/","title":"task.kaut.to v2.0 Executive Summary","text":""},{"location":"specs/task-v2/#what-were-building","title":"What We're Building","text":"<p>Transform the static task manager at kaut.to/tasks into a modern multi-account Google Tasks application at task.kaut.to that aggregates tasks from all three accounts (personal, xwander, accolade).</p>"},{"location":"specs/task-v2/#key-decisions","title":"Key Decisions","text":""},{"location":"specs/task-v2/#1-multi-account-architecture","title":"1. Multi-Account Architecture","text":"<ul> <li>Aggregate tasks from: joni.kautto@gmail.com, joni@xwander.fi, joni@accolade.fi</li> <li>Color-coded account indicators</li> <li>Unified view with account filtering</li> <li>Account-aware task creation</li> </ul>"},{"location":"specs/task-v2/#2-repository-structure","title":"2. Repository Structure","text":"<ul> <li>New monorepo: github.com/jkautto/kaut-apps</li> <li>Contains: pastebin, tasks, auth, browser-test</li> <li>Shared utilities and consistent deployment</li> <li>Individual app independence maintained</li> </ul>"},{"location":"specs/task-v2/#3-technology-stack","title":"3. Technology Stack","text":"<ul> <li>Backend: FastAPI (consistency with other services)</li> <li>Frontend: Progressive enhancement of existing PWA</li> <li>Auth: OAuth2 with existing Google tokens</li> <li>Database: SQLite for caching/settings</li> </ul>"},{"location":"specs/task-v2/#4-self-documenting-api","title":"4. Self-Documenting API","text":"<p>Following established pattern: - <code>/api</code> - Human-readable docs - <code>/api-spec.json</code> - Machine-readable spec - <code>/health</code> - Service health check</p>"},{"location":"specs/task-v2/#implementation-timeline","title":"Implementation Timeline","text":"<p>Week 1: Foundation - Days 1-2: Create repository, migrate pastebin - Days 3-4: OAuth setup, multi-account authentication - Days 5-7: Core API development</p> <p>Week 2: Features - Days 8-9: Complete API endpoints - Days 10-11: Frontend migration - Days 12-14: Testing and deployment</p>"},{"location":"specs/task-v2/#key-features","title":"Key Features","text":""},{"location":"specs/task-v2/#mvp-must-have","title":"MVP (Must Have)","text":"<p>\u2713 Multi-account task aggregation \u2713 Account indicators in UI \u2713 Basic CRUD operations \u2713 OAuth token refresh \u2713 Self-documenting API  </p>"},{"location":"specs/task-v2/#phase-2-should-have","title":"Phase 2 (Should Have)","text":"<ul> <li>Focus mode with timer</li> <li>Advanced filtering/sorting</li> <li>Quick task entry</li> <li>Sync status indicators</li> <li>PWA offline support</li> </ul>"},{"location":"specs/task-v2/#technical-highlights","title":"Technical Highlights","text":""},{"location":"specs/task-v2/#multi-account-service","title":"Multi-Account Service","text":"<pre><code># Aggregate tasks from all accounts\nall_tasks = await task_service.get_all_tasks()\n\n# Create task in specific account\nawait task_service.create_task(\n    title=\"Review budget\",\n    account=\"xwander\"\n)\n</code></pre>"},{"location":"specs/task-v2/#frontend-integration","title":"Frontend Integration","text":"<pre><code>// Account-aware task display\n&lt;span class=\"account-dot\" style=\"background: #27ae60\"&gt;&lt;/span&gt;\n&lt;div class=\"task-title\"&gt;Review Q3 Budget&lt;/div&gt;\n&lt;div class=\"task-account\"&gt;Xwander&lt;/div&gt;\n</code></pre>"},{"location":"specs/task-v2/#deployment","title":"Deployment","text":"<ol> <li>DNS: Create A record for task.kaut.to \u2192 157.180.28.186</li> <li>Service: Run on port 8092 with systemd</li> <li>Proxy: Nginx configuration ready</li> <li>Auth: HTTP Basic (joni:Penacova)</li> </ol>"},{"location":"specs/task-v2/#success-criteria","title":"Success Criteria","text":"<ol> <li>\u2713 All three accounts accessible</li> <li>\u2713 Tasks sync in real-time</li> <li>\u2713 Account context preserved</li> <li>\u2713 API self-documented</li> <li>\u2713 PWA functionality maintained</li> </ol>"},{"location":"specs/task-v2/#next-steps","title":"Next Steps","text":"<ol> <li>Immediate: Create kaut-apps repository</li> <li>This Week: Implement core backend</li> <li>Next Week: Complete frontend migration</li> <li>Testing: Verify all account operations</li> <li>Launch: Deploy to task.kaut.to</li> </ol>"},{"location":"specs/task-v2/#risk-mitigation","title":"Risk Mitigation","text":"<ul> <li>Token Expiry: Automatic refresh implementation</li> <li>API Limits: Intelligent caching layer</li> <li>Rollback: Keep kaut.to/tasks as fallback</li> <li>Data Loss: No destructive operations without confirmation</li> </ul> <p>Bottom Line: A modern, multi-account task manager that aggregates Google Tasks from all three accounts into a unified, intelligent interface with full API access for DAI/PAI integration.</p> <p>Ready to proceed with implementation upon approval.</p>"},{"location":"specs/universal-setup/","title":"Universal Setup Script Specification v0.1","text":""},{"location":"specs/universal-setup/#overview","title":"Overview","text":"<p>A hybrid bash/AI-readable script accessible via HTTPS that sets up a complete development environment with one command.</p>"},{"location":"specs/universal-setup/#access-method","title":"Access Method","text":"<pre><code># Direct bash execution:\ncurl -s https://joni:Penacova@kaut.to/setup | bash\n\n# AI consumption:\ncurl -s https://joni:Penacova@kaut.to/setup &gt; setup.sh &amp;&amp; cat setup.sh\n</code></pre>"},{"location":"specs/universal-setup/#design-principles","title":"Design Principles","text":"<ol> <li>Single Command: One curl to get everything</li> <li>Self-Contained: All credentials and access info embedded</li> <li>Temporary Workspace: Easy cleanup with single directory</li> <li>AI-Friendly: Clear comments for AI interpretation</li> <li>Human-Executable: Valid bash script</li> </ol>"},{"location":"specs/universal-setup/#script-structure","title":"Script Structure","text":"<pre><code>#!/bin/bash\n# UNIVERSAL SETUP SCRIPT FOR JONI'S DEVELOPMENT ENVIRONMENT\n# \n# For AI Assistants: Execute each section below in order\n# For Humans: curl -s https://joni:Penacova@kaut.to/setup | bash\n#\n# This script sets up:\n# - Credentials via dotenv-vault (72+ environment variables)\n# - jtools repository (Python CLI tools)\n# - kaut-shared repository (Docker configs, standards, docs)\n# - Temporary workspace at ~/kwork/\n\n# Exit on any error\nset -e\n\necho \"\ud83d\ude80 Starting universal setup...\"\n\n# 1. CREATE WORKSPACE\n# AI: Create a temporary workspace directory\nmkdir -p ~/kwork &amp;&amp; cd ~/kwork\necho \"\u2713 Created workspace at ~/kwork\"\n\n# 2. SETUP CREDENTIALS \n# AI: Install dotenv-vault and pull all platform credentials\necho \"\ud83d\udce6 Installing dotenv-vault CLI...\"\nnpm install -g @dotenv-org/cli --silent\n\necho \"\ud83d\udd10 Setting up credential vault...\"\ncat &gt; .env.me &lt;&lt; 'EOF'\nDOTENV_ME=me_3879349a3f4afc8558ad76e354b8c3321399a5dda091361a64f4d948c2309718\nEOF\n\n# Initialize vault connection\nnpx dotenv-vault@latest new vlt_25ccece6b7add6a2f9c5ae012567f4845d73b7a6d6ab088d36accc3948dbda17 --yes\n\n# Pull all credentials\necho \"\u2b07\ufe0f  Pulling credentials...\"\nnpx dotenv-vault@latest pull\n\necho \"\u2713 Credentials available in .env ($(grep -c '^[A-Z_]*=' .env) variables)\"\n\n# 3. CLONE ESSENTIAL REPOSITORIES\n# AI: Clone the core tool repositories\necho \"\ud83d\udce5 Cloning repositories...\"\n\n# jtools - Python CLI tools\ngit clone --quiet https://github.com/jkautto/jtools.git\necho \"\u2713 jtools cloned\"\n\n# kaut-shared - Docker configs, standards, shared resources\ngit clone --quiet https://github.com/jkautto/kaut-shared.git  \necho \"\u2713 kaut-shared cloned\"\n\n# 4. SETUP ENVIRONMENT\n# AI: Configure environment for immediate use\necho \"\u2699\ufe0f  Configuring environment...\"\n\n# Add jtools to PATH for this session\nexport PATH=\"$PATH:$HOME/kwork/jtools\"\n\n# Create convenience symlinks\nln -sf ~/kwork/.env ~/.env.kwork\n\n# 5. CREATE CONTEXT FILE\n# AI: Create a context file with key information\ncat &gt; CONTEXT.md &lt;&lt; 'EOF'\n# Development Environment Context\n\n## Available Resources\n- **Credentials**: .env file with 72+ variables (via dotenv-vault)\n- **jtools**: Python CLI tools (gsheet.py, gtask.py, px.py, etc.)\n- **kaut-shared**: Docker templates, MCP architecture, standards\n\n## Key Paths\n- Workspace: ~/kwork/\n- Credentials: ~/kwork/.env\n- Tools: ~/kwork/jtools/\n- Shared Resources: ~/kwork/kaut-shared/\n\n## Common Commands\n- Google Sheets: `python3 ~/kwork/jtools/gsheet.py`\n- Perplexity Search: `python3 ~/kwork/jtools/px.py`\n- View credentials: `grep -E \"^[A-Z_]*=\" ~/kwork/.env | cut -d= -f1`\n\n## Cleanup\nWhen done: `rm -rf ~/kwork`\nEOF\n\n# 6. FINAL SUMMARY\necho \"\"\necho \"\u2705 Setup complete!\"\necho \"\"\necho \"\ud83d\udcc1 Workspace: ~/kwork/\"\necho \"\ud83d\udd11 Credentials: ~/kwork/.env ($(grep -c '^[A-Z_]*=' .env) variables)\"\necho \"\ud83d\udee0\ufe0f  Tools available in: ~/kwork/jtools/\"\necho \"\ud83d\udcda Shared resources in: ~/kwork/kaut-shared/\"\necho \"\"\necho \"\ud83e\uddf9 Cleanup when done: rm -rf ~/kwork\"\necho \"\"\n\n# For AI assistants: Setup is complete. The environment is ready for use.\n</code></pre>"},{"location":"specs/universal-setup/#implementation-steps","title":"Implementation Steps","text":"<ol> <li> <p>Create Web Endpoint <pre><code># On kaut.to server\nsudo mkdir -p /var/www/kaut.to/\nsudo vim /var/www/kaut.to/setup\n# Paste the script above\nsudo chmod 644 /var/www/kaut.to/setup\n</code></pre></p> </li> <li> <p>Configure Nginx <pre><code>location = /setup {\n    auth_basic \"Development Setup\";\n    auth_basic_user_file /etc/nginx/auth/.htpasswd;\n\n    add_header Content-Type \"text/plain; charset=utf-8\";\n    try_files /setup =404;\n}\n</code></pre></p> </li> <li> <p>Test Access <pre><code># Test authentication works\ncurl -s https://joni:Penacova@kaut.to/setup | head -20\n\n# Test full execution\ncurl -s https://joni:Penacova@kaut.to/setup | bash\n</code></pre></p> </li> </ol>"},{"location":"specs/universal-setup/#security-considerations","title":"Security Considerations","text":"<ol> <li>HTTPS Only: Enforce SSL for credential transmission</li> <li>HTTP Basic Auth: Existing .htpasswd protection</li> <li>Credential Storage: Using dotenv-vault's secure mechanism</li> <li>Temporary Workspace: Easy to remove all traces</li> </ol>"},{"location":"specs/universal-setup/#benefits","title":"Benefits","text":"<ol> <li>One Command Setup: Single curl command gets everything</li> <li>No Prerequisites: Only needs curl and npm</li> <li>AI-Friendly: Clear instructions throughout</li> <li>Human-Executable: Works as bash script</li> <li>Complete Environment: All tools and credentials ready</li> <li>Easy Cleanup: Single directory to remove</li> </ol>"},{"location":"specs/universal-setup/#future-enhancements-v02","title":"Future Enhancements (v0.2)","text":"<ul> <li>Add platform detection (Linux/Mac)</li> <li>Include PAI toolkit </li> <li>Add interactive mode for selective installation</li> <li>Create <code>kwork</code> command for quick access</li> <li>Add update mechanism</li> </ul>"},{"location":"specs/universal-setup/#usage-examples","title":"Usage Examples","text":""},{"location":"specs/universal-setup/#for-new-server-setup","title":"For New Server Setup","text":"<pre><code># SSH to new server\nssh newserver\n\n# Run setup\ncurl -s https://joni:Penacova@kaut.to/setup | bash\n\n# Start working with tools\ncd ~/kwork\npython3 jtools/px.py search \"kubernetes best practices\"\n</code></pre>"},{"location":"specs/universal-setup/#for-ai-assistant","title":"For AI Assistant","text":"<pre><code>User: Pull my development environment\n\nAI: I'll set up your development environment:\n*Executes: curl -s https://joni:Penacova@kaut.to/setup | bash*\n\nThe environment is now ready with:\n- 72+ credentials in ~/kwork/.env\n- jtools CLI tools in ~/kwork/jtools/\n- Shared resources in ~/kwork/kaut-shared/\n</code></pre>"},{"location":"specs/universal-setup/#for-temporary-work","title":"For Temporary Work","text":"<pre><code># Quick setup for debugging\ncurl -s https://joni:Penacova@kaut.to/setup | bash\ncd ~/kwork\n\n# Do work...\n\n# Clean up completely\nrm -rf ~/kwork\n</code></pre>"}]}